<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="unidoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>MeCab using UTF-8</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="https://cympfh.cc/resources/css/youtube.css" />
  <link href="https://unpkg.com/prismjs@1.x.0/themes/prism.css" rel="stylesheet" />
  <script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-chtml-full.js"></script>
  <link href="../resources/css/c.css" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

</head>
<body>
<header class="page-header">
    <a href='index.html'><i class="fa fa-sticky-note"></i></a>
</header>

<h1 class="title" id="1-MeCab%20using%20UTF-8">MeCab using UTF-8</h1>
<p><div class='is-pulled-right'> <a class='tag is-green' href=index.html#自然言語処理>自然言語処理</a> </div></p>
<h2 id="2-%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">インストール</h2>
<h3 id="3-%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89">ダウンロード</h3>
<p>必要なファイルは MeCab 本体と、そのための辞書. 辞書には複数種類があるが、IPA辞書が推奨とされている.</p>
<p>いつのまにか Google Code から Github にプロジェクトが移ってて、</p>

<div class="blogcard" style="width:auto;max-width:9999px;border:1px solid #E0E0E0;border-radius:3px;margin:10px 0;padding:15px;line-height:1.4;text-align:left;background:#FFFFFF;">
<a href="https://github.com/taku910/mecab.git" target="_blank" style="display:block;text-decoration:none;">
<span class="blogcard-image" style="float:right;width:100px;padding:0 0 0 10px;margin:0 0 5px 5px;">
<img src="https://opengraph.githubassets.com/b3c1ec4448a19eb19cc63b0900a28e42667ec28bc547900900a46000fd6025ab/taku910/mecab" width="100" style="width:100%;height:auto;max-height:100px;min-width:0;border:0 none;margin:0;" />
</span><br style="display:none">
<span class="blogcard-title" style="font-size:112.5%;font-weight:700;color:#333333;margin:0 0 5px 0;">GitHub - taku910/mecab: Yet another Japanese morphological analyzer</span><br />
<span class="blogcard-content" style="font-size:87.5%;font-weight:400;color:#666666;">Yet another Japanese morphological analyzer. Contribute to taku910/mecab development by creating an account on GitHub.</span><br />
<span style="clear:both;display:block;overflow:hidden;height:0;">&nbsp;</span>
</a><div style="font-size:75%;text-align:right;clear:both"><a href="https://github.com/taku910/mecab.git" target="_blank" rel="nofollow">github.com/taku910/mecab.git</a></div></div>
    
<p>に、mecab本体も辞書も入ってる.</p>
<p>以下、LinuxまたはMacOSで文字コードをUTF-8に縛って利用するためのビルド方法を書く</p>
<h3 id="3-cd%20mecab-0%2E996">cd mecab-0.996</h3>
<p>MeCab本体のインストールを行う</p>
<pre><code class="code language-bash">.&#x2F;configure --with-charset=utf8 --enable-utf8-only
sudo make install
</code></pre>
<p>辞書がない状態でmecabを起動するとこうなる</p>
<pre><code class="code language-bash">param.cpp(69) [ifs] no such file or directory: &#x2F;usr&#x2F;local&#x2F;lib&#x2F;mecab&#x2F;dic&#x2F;ipadic&#x2F;dicrc
</code></pre>
<h3 id="3-cd%20mecab-ipadic-2%2E7%2E0-20070801">cd mecab-ipadic-2.7.0-20070801</h3>
<p>次にMeCabで利用するための辞書をインストールする</p>
<pre><code class="code language-bash">.&#x2F;configure --with-charset=utf8
sudo ldconfig
sudo make install
</code></pre>
<h3 id="3-%E8%A9%A6%E7%94%A8">試用</h3>
<p>正しくインストールされたか見てみる</p>
<pre><code class="code language-bash">   mecab &lt;&lt;&lt; &quot;こんにちわ&quot;
こんにちわ      感動詞,*,*,*,*,*,こんにちわ,コンニチワ,コンニチワ
EOS
</code></pre>
<p>「こんにちわ」は感動詞である。</p>
<h3 id="3-%E8%BF%BD%E5%8A%A0%E3%81%AE%E8%BE%9E%E6%9B%B8%3A%20%3Ca%20href%3D%22https%3A%2F%2Fgithub%2Ecom%2Fneologd%2Fmecab-ipadic-neologd%22%3Eipadic-neologd%3C%2Fa%3E">追加の辞書: <a href="https://github.com/neologd/mecab-ipadic-neologd">ipadic-neologd</a></h3>
<p>ipadic辞書utf-8版が入っているとき、この辞書を追加で入れても良い. この辞書は新語が週2ペースで追加されているらしい. その代わり辞書のサイズが膨大. <a href="https://github.com/neologd/mecab-ipadic-neologd/blob/master/README.ja.md">README.ja</a> の通りにやればインストールできる.</p>
<p>また、この辞書を使って mecab を動かすには <code>mecab -d &#x2F;usr&#x2F;local&#x2F;lib&#x2F;mecab&#x2F;dic&#x2F;mecab-ipadic-neologd</code> という風に <code>-d</code> オプションが必要.</p>
<p>意外な語が固有名詞として登録されていたりするので注意が必要.</p>
<blockquote>追記. neologd は 2020 年を最後に更新が止まっている.</blockquote>
<h2 id="2-%E3%82%AA%E3%83%97%E3%82%B7%E3%83%A7%E3%83%B3">オプション</h2>
<p><code>man</code> 見ても何かあんまり説明が足りてない <br /> 次のサイトは大変詳細に書いてある <br /></p>
<ul>
  <li><a href="http://www.mwsoft.jp/programming/munou/mecab_command.html">MeCabのコマンドライン引数一覧とその実行例 | mwSoft</a></li>
</ul>
<h3 id="3-%E5%88%B6%E7%B4%84%E4%BB%98%E3%81%8D%E8%A7%A3%E6%9E%90%20%28%E9%83%A8%E5%88%86%E8%A7%A3%E6%9E%90%29%20%3Ccode%3E-p%3C%2Fcode%3E">制約付き解析 (部分解析) <code>-p</code></h3>
<p>辞書に無いが品詞が既知な語や、 その箇所のそこだけこの品詞にしたい。</p>
<pre><code class="code">mecab &lt;&lt;&lt; &#x27;彼女はせもぽぬめと呼ばれている&#x27;
彼女    名詞,代名詞,一般,*,*,*,彼女,カノジョ,カノジョ
は      助詞,係助詞,*,*,*,*,は,ハ,ワ
せ      動詞,自立,*,*,サ変・スル,未然ヌ接続,する,セ,セ
も      助詞,係助詞,*,*,*,*,も,モ,モ
ぽ      形容詞,接尾,*,*,形容詞・アウオ段,ガル接続,ぽい,ポ,ポ
ぬ      助動詞,*,*,*,特殊・ヌ,基本形,ぬ,ヌ,ヌ
め      名詞,一般,*,*,*,*,め,メ,メ
と      助詞,格助詞,引用,*,*,*,と,ト,ト
呼ば    動詞,自立,*,*,五段・バ行,未然形,呼ぶ,ヨバ,ヨバ
れ      動詞,接尾,*,*,一段,連用形,れる,レ,レ
て      助詞,接続助詞,*,*,*,*,て,テ,テ
いる    動詞,非自立,*,*,一段,基本形,いる,イル,イル
EOS
</code></pre>
<p>入力を <code>s&#x2F;せもぽぬめ&#x2F;\nせもぽぬめ\t名詞\n&#x2F;g</code> と置換する</p>
<pre><code class="code">mecab -p &lt;&lt;&lt; &#x27;彼女は
せもぽぬめ      名詞
と呼ばれている
EOS&#x27;
彼女    名詞,代名詞,一般,*,*,*,彼女,カノジョ,カノジョ
は      助詞,係助詞,*,*,*,*,は,ハ,ワ
せもぽぬめ      名詞,一般,*,*,*,*,*
と      助詞,格助詞,引用,*,*,*,と,ト,ト
呼ば    動詞,自立,*,*,五段・バ行,未然形,呼ぶ,ヨバ,ヨバ
れ      動詞,接尾,*,*,一段,連用形,れる,レ,レ
て      助詞,接続助詞,*,*,*,*,て,テ,テ
いる    動詞,非自立,*,*,一段,基本形,いる,イル,イル
EOS
</code></pre>
<p>ただし、「せもぽぬめ」が複数出現する場合 <br /> そのたびに上のような置換を行わなければならない</p>
<p>小さい辞書をテキストで書いて追加に使うにはどうしたら良いんだろう？</p>
<h2 id="2-Python3%20%E3%83%90%E3%82%A4%E3%83%B3%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0">Python3 バインディング</h2>
<p><img src="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" style="width:16px;height:16px;margin-right:4px;vertical-align:middle;" /><a href="https://qiita.com/sogawa@github/items/fd9bdaf8df27335f9a65">Python3 MeCabモジュールのImportErrorの対処 #mecab - Qiita</a> を参考にした.</p>
<pre><code class="code language-bash">pip install mecab-python3
mecab-config --libs-only-L | sudo tee &#x2F;etc&#x2F;ld.so.conf.d&#x2F;mecab.conf &amp;&amp; sudo ldconfig
</code></pre>
<h3 id="3-%E8%A9%A6%E7%94%A8">試用</h3>
<p>わかち書きをさせてみる.</p>
<pre><code class="code language-python">import MeCab
mecab = MeCab.Tagger(&#x27;-Owakati -d &#x2F;usr&#x2F;local&#x2F;lib&#x2F;mecab&#x2F;dic&#x2F;mecab-ipadic-neologd&#x27;)
mecab.parse(&#x27;今日はいい天気ですね&#x27;).split()  # =&gt; [&#x27;今日&#x27;, &#x27;は&#x27;, &#x27;いい&#x27;, &#x27;天気&#x27;, &#x27;です&#x27;, &#x27;ね&#x27;]
</code></pre>


<!--

  以下を埋め込むと H2 タグを列挙してそれぞれへのリンクにする.
  ただし "INDEX" は除外する.

    <div id=toc></div>


  H2, H3 タグまでを列挙するには以下を埋め込む.

    <div id=toc-level-2></div>

-->
<script>
(function() {

  function naming(obj, name) {
      var PREF = document.createElement('a');
      PREF.name = name;
      obj.appendChild(PREF);
  }

  function level1() {

    var sections = document.getElementsByTagName('h2');
    var OL = document.createElement('ol');
    for (var i=0; i < sections.length; ++i) {
      var LI = document.createElement('li');
      var A = document.createElement('a');
      A.innerHTML = sections[i].innerHTML;
      if (A.innerHTML.toUpperCase() == 'INDEX') continue;
      A.href = '#' + i;
      LI.appendChild(A);
      OL.appendChild(LI);
      naming(sections[i], i);
      // var PREF = document.createElement('a');
      // PREF.name = i;
      // sections[i].appendChild(PREF);
    }

    return OL;
  }

  function level2() {

    var sections = document.querySelectorAll('h2,h3');
    var tree = [];
    for (var i = 0; i < sections.length; ++i) {
      if (sections[i].tagName == 'H2') {
        if (sections[i].innerHTML.toUpperCase() === 'INDEX') continue;
        tree.push([sections[i]]);
      } else {
        if (tree.length > 0) {
          tree[tree.length-1].push(sections[i]);
        } else {
          tree.push([sections[i]]);
        }
      }
    }

    var OL = document.createElement('ol');
    for (var i = 0; i < tree.length; ++i) {

      // h2-level
      var LI = document.createElement('li');
      var A = document.createElement('a');
      A.innerHTML = tree[i][0].innerHTML;
      A.href = '#' + i;
      naming(tree[i][0], i);
      LI.appendChild(A);

      // h3-level
      if (tree[i].length > 1) {
        var OL_sub = document.createElement('ol');
        for (var j = 1; j < tree[i].length; ++j) {
          var LI_sub = document.createElement('li');
          var A = document.createElement('a');
          A.innerHTML = tree[i][j].innerHTML;
          A.href = `#${i}-${j}`;
          naming(tree[i][j], `${i}-${j}`);
          LI_sub.appendChild(A);
          OL_sub.appendChild(LI_sub);
        }
        LI.appendChild(OL_sub);
      }

      OL.appendChild(LI);
    }

    return OL;
  }

  function append_toc() {
    if (document.getElementById('toc')) {
      document.getElementById('toc').appendChild(level1());
    }
    if (document.getElementById('toc-level-2')) {
      document.getElementById('toc-level-2').appendChild(level2());
    }
  }

  window.addEventListener('DOMContentLoaded', append_toc, false);
}());
</script>

  <script src="https://cympfh.cc/resources/js/youtube.js"></script>
  <script src="https://unpkg.com/prismjs@v1.x/components/prism-core.min.js"></script>
  <script src="https://unpkg.com/prismjs@v1.x/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>