<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Mon Sep 14 02:29:58 JST 2015</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../../../resources/css/c.css">
  <link rel="stylesheet" href="../../css/post.css">
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<a href="../../">ğŸ”™ Back to Top</a>
<header>
<h1 class="title">Mon Sep 14 02:29:58 JST 2015</h1>
</header>
<h2 id="beamerã‚¹ãƒ©ã‚¤ãƒ‰ã§ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’å‡ºã™">beamerã‚¹ãƒ©ã‚¤ãƒ‰ã§ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’å‡ºã™</h2>
<p>ã‚¹ãƒ©ã‚¤ãƒ‰ã®ä¸€ç•ªä¸‹ã®ã¨ã“ã‚ã«ã€ ä»Šç¤ºã—ã¦ã‚‹ãƒšãƒ¼ã‚¸ã¯å…¨ä½“ã®ä½•å‰²ã‚ãŸã‚Šã®ã¨ã“ã‚ã§ã‚ã‚‹ã‹ã‚’ã€ æ£’ã§å¯è¦–åŒ–ã™ã‚‹ã‚„ã¤</p>
<figure>
<img src="../../img/2015/0914-progressbar.jpg" />
</figure>
<p>ãƒ—ãƒªã‚¢ãƒ³ãƒ–ãƒ«ã«æ¬¡ã‚’æ›¸ã„ã¦ãŠã. ã‚‚ã¡ã‚ã‚“ã€<code>usetheme</code> ã‚’å‘¼ã‚“ã å¾Œã§ãªã„ã¨ä¸Šæ›¸ãã•ã‚Œã‚‹.</p>
<div class="sourceCode"><pre class="sourceCode tex"><code class="sourceCode latex"><span class="co">%%% FOOTER</span>
<span class="fu">\makeatother</span>
<span class="fu">\setbeamertemplate</span>{footline}
{
  <span class="fu">\dimen</span>0=1.1<span class="fu">\paperwidth</span>
  <span class="fu">\multiply\dimen</span>0 by <span class="fu">\insertframenumber</span>
  <span class="fu">\divide\dimen</span>0 by <span class="fu">\inserttotalframenumber</span>
  <span class="fu">\edef</span>\progressbarwidth{\the\dimen0}
  <span class="fu">\leavevmode</span><span class="co">%</span>
  <span class="fu">\setbeamercolor</span>{progress outer}{fg=white, bg=white}
  <span class="fu">\setbeamercolor</span>{progress bar}{bg=pink!90!white}
  <span class="kw">\begin</span>{<span class="ex">beamercolorbox</span>}[wd=1.1<span class="fu">\paperwidth</span>,ht=0.25ex,dp=1ex]{progress outer}
    <span class="kw">\begin</span>{<span class="ex">beamercolorbox</span>}[wd=<span class="fu">\progressbarwidth</span>,ht=0.25ex,dp=1ex]{progress bar}
    <span class="kw">\end</span>{<span class="ex">beamercolorbox</span>}<span class="co">%</span>
  <span class="kw">\end</span>{<span class="ex">beamercolorbox</span>}<span class="co">%</span>
}
<span class="fu">\makeatletter</span></code></pre></div>
<p>æœ¬æ¥ã€1.1ã¨ã„ã†æ•°å­—ã¯è¦ã‚‰ãªã„ã®ã ã‘ã©ã€ãªã‚“ã‹å·¦å³ã«ä½™ç™½ãŒå‹æ‰‹ã«ã§ãã‚‹ã®ã§ (ã©ã£ã‹ã§ã„ã˜ã£ãŸï¼Ÿ).</p>
<p>ã¤ã„ã§ãªãŒã‚‰ã€ ãƒšãƒ¼ã‚¸ç•ªå·ã¯ã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ä»£ã‚ã‚Šã«æŒ¿å…¥ã•ã›ã¦ã‚‹.</p>
<div class="sourceCode"><pre class="sourceCode tex"><code class="sourceCode latex"><span class="fu">\setbeamertemplate</span>{navigation symbols}{
  <span class="fu">\setbeamercolor</span>{footline}{fg=pink!90!white}
  <span class="fu">\usebeamerfont</span>{footline}<span class="co">%</span>
  <span class="fu">\usebeamercolor</span>[fg]{footline}<span class="co">%</span>
  <span class="fu">\hspace</span>{1em}
  <span class="fu">\fontsize</span>{2.8em}{2.8em}<span class="fu">\selectfont</span>
  <span class="fu">\rotatebox</span>{90}{<span class="fu">\insertframenumber</span>}</code></pre></div>
<p>ã‚ªã‚·ãƒ£ãƒ¬ã®ã¤ã‚‚ã‚Šã§90åº¦å›è»¢ã•ã›ã¦ã‚‹ã‘ã©ã€ã©ã†ã ã‚ã†...</p>
<h1 id="mon-sep-14-212125-jst-2015">Mon Sep 14 21:21:25 JST 2015</h1>
<h2 id="scala-ã®-list.diff-ãŒé…ã„">Scala ã® List.diff ãŒé…ã„</h2>
<p>ã¨ã„ã£ã¦ã‚‚ã€ã‚¯ã‚¤ãƒƒã‚¯ã‚½ãƒ¼ãƒˆã¨åŸºæ•°ã‚½ãƒ¼ãƒˆã‚’æ¯”ã¹ã‚‹ã‚ˆã†ãªã‚‚ã®ã ã‘ã©...</p>
<div class="sourceCode"><pre class="sourceCode scala"><code class="sourceCode scala"><span class="kw">import</span> scala.<span class="fu">math</span>.<span class="fu">_</span>
<span class="kw">import</span> scala.<span class="fu">collection</span>.<span class="fu">mutable</span>.{Queue, Set}
<span class="kw">import</span> scala.<span class="fu">collection</span>.<span class="fu">immutable</span>.<span class="fu">_</span>
 
<span class="kw">object</span> Main {

  <span class="co">// æ™‚é–“è¨ˆæ¸¬</span>
  <span class="kw">def</span> <span class="fu">thetime</span>(proc: () =&gt; Unit): Unit = {
    <span class="kw">val</span> start = System.<span class="fu">currentTimeMillis</span>
    <span class="fu">proc</span>()
    <span class="fu">println</span>((System.<span class="fu">currentTimeMillis</span> - start) + <span class="st">&quot;msec&quot;</span>)
  }

  <span class="co">// é–¢æ•°å‹ã£ã½ã„æ™®é€šã®å·®åˆ†</span>
  <span class="co">// ãŸã ã—ã‚½ãƒ¼ãƒˆæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹</span>
  <span class="kw">def</span> <span class="fu">difference</span>(xs: List[Int], ys: List[Int]): List[Int] = {
    <span class="kw">def</span> <span class="fu">sub</span>(ac: List[Int], xs: List[Int], ys: List[Int]): List[Int] = {
      <span class="kw">if</span> (xs.<span class="fu">length</span> == <span class="dv">0</span>) ac.<span class="fu">reverse</span>
      <span class="kw">else</span> <span class="kw">if</span> (ys.<span class="fu">length</span> == <span class="dv">0</span>) ac.<span class="fu">reverse</span> ++ xs
      <span class="kw">else</span> <span class="kw">if</span> (xs.<span class="fu">head</span> == ys.<span class="fu">head</span>) <span class="fu">sub</span>(ac, xs.<span class="fu">tail</span>, ys.<span class="fu">tail</span>)
      <span class="kw">else</span> <span class="kw">if</span> (xs.<span class="fu">head</span> &gt; ys.<span class="fu">head</span>) <span class="fu">sub</span>(ac, xs, ys.<span class="fu">tail</span>)
      <span class="kw">else</span> <span class="fu">sub</span>(xs.<span class="fu">head</span> :: ac, xs.<span class="fu">tail</span>, ys)
    }
    <span class="fu">sub</span>(List(), xs, ys)
  }

  <span class="co">// ä¸€å›é…åˆ— [Bool] ã«ã—ã¦ã‹ã‚‰å·®åˆ†ã‚’å‡ºã™</span>
  <span class="co">// ãŸã ã—ã€ãƒªã‚¹ãƒˆã®è¦ç´ ãŒ [0 ... n] ã§ã‚ã‚‹ã“ã¨ã‚’å‰æã¨ã™ã‚‹</span>
  <span class="co">// (åŸºæ•°ã‚½ãƒ¼ãƒˆã£ã½ã„)</span>
  <span class="kw">def</span> <span class="fu">viaArray</span>(n: Int, xs: List[Int], ys: List[Int]): List[Int] = {
    <span class="kw">val</span> a = Array.<span class="fu">fill</span>(n)(<span class="kw">false</span>)
    <span class="kw">val</span> b = Array.<span class="fu">fill</span>(n)(<span class="kw">false</span>)
    <span class="kw">for</span> (x &lt;- xs) <span class="fu">a</span>(x) = <span class="kw">true</span>
    <span class="kw">for</span> (y &lt;- ys) <span class="fu">b</span>(y) = <span class="kw">true</span>
    <span class="kw">var</span> ret = List[Int]()
    <span class="kw">for</span> (i &lt;- <span class="dv">0</span> until n) <span class="kw">if</span> ((!<span class="fu">a</span>(i)) &amp;&amp; <span class="fu">b</span>(i)) ret = i :: ret
    ret
  }

  <span class="kw">def</span> <span class="fu">main</span>(args: Array[String]) {
    <span class="kw">val</span> cin = <span class="kw">new</span> java.<span class="fu">util</span>.<span class="fu">Scanner</span>(System.<span class="fu">in</span>)

    <span class="kw">val</span> a: List[Int] = <span class="fu">Range</span>(<span class="dv">0</span>, <span class="dv">100000</span>) toList
    <span class="kw">val</span> b: List[Int] = <span class="fu">Range</span>(<span class="dv">100</span>, <span class="dv">10000</span>) toList
    <span class="kw">val</span> c: List[Int] = <span class="fu">Range</span>(<span class="dv">10</span>, <span class="dv">1000</span>) toList
    <span class="kw">def</span> <span class="fu">a1</span>(): Unit = <span class="fu">println</span>((a diff b).<span class="fu">length</span>) <span class="co">// 10^5 * 10^4</span>
    <span class="kw">def</span> <span class="fu">a2</span>(): Unit = <span class="fu">println</span>((b diff c).<span class="fu">length</span>) <span class="co">// 10^4 * 10^3</span>
    <span class="kw">def</span> <span class="fu">b1</span>(): Unit = <span class="fu">println</span>(<span class="fu">difference</span>(a, b).<span class="fu">length</span>)
    <span class="kw">def</span> <span class="fu">b2</span>(): Unit = <span class="fu">println</span>(<span class="fu">difference</span>(b, c).<span class="fu">length</span>)
    <span class="kw">def</span> <span class="fu">c1</span>(): Unit = <span class="fu">println</span>(<span class="fu">viaArray</span>(<span class="dv">100001</span>, a, b).<span class="fu">length</span>)
    <span class="kw">def</span> <span class="fu">c2</span>(): Unit = <span class="fu">println</span>(<span class="fu">viaArray</span>(<span class="dv">100001</span>, b, c).<span class="fu">length</span>)
    <span class="fu">thetime</span>(a1)
    <span class="fu">thetime</span>(a2)
    <span class="fu">thetime</span>(b1)
    <span class="fu">thetime</span>(b2)
    <span class="fu">thetime</span>(c1)
    <span class="fu">thetime</span>(c2)
  }
}</code></pre></div>
<p>çµæœãŒä»¥ä¸‹ã®ã‚ˆã†</p>
<pre><code># List.diff (çµ„ã¿è¾¼ã¿)
90100
96msec
9000
3msec
# è‡ªå‰ difference
90100
2956msec
9000
25msec
# è‡ªå‰ differenceViaArray
90100
43msec
9000
2msec</code></pre>
<p>çµ„ã¿è¾¼ã¿ <code>diff</code> ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ãŒã©ã“ã«ã‚ã‚‹ã®ã‹ã‚ã‹ã‚‰ãªã„ã®ã§èª­ã‚“ã§ãªã„ã®ã ãŒã€ <code>differenceViaArray</code> ã«è¼ƒã¹ã¦ äºŒå€ç¨‹åº¦ é…ã„. <code>a-b</code> ã¨ <code>b-c</code> ã‚’æ¯”ã¹ã‚‹ã¨ã€ <span class="math inline">\(O(n^2)\)</span> ã¨ã„ã†ã‚ã‘ã§ã‚‚ãªã„ã‚ˆã†ã ã‘ã‚Œã©.</p>
<p><code>thetime(() =&gt; println(0))</code> ã£ã¦æ›¸ããŸã„ã‚“ã ã‘ã©ã€å‹ã‚¨ãƒ©ãƒ¼ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ããªã„. ãªã‚“ã ã‚ã†.</p>
<h1 id="mon-sep-14-022958-jst-2015">Mon Sep 14 02:29:58 JST 2015</h1>
<h2 id="ç°¡æ˜“çš„ãªç”»åƒã®è‡ªå‹•åˆ†é¡ã‚’è©¦ã™">ç°¡æ˜“çš„ãªã€ç”»åƒã®è‡ªå‹•åˆ†é¡ã‚’è©¦ã™</h2>
<p>ç”»åƒè­˜åˆ¥ã¨ã„ãˆã°NNsã ã‘ã©ã€ SIFTã«ä»£è¡¨ã•ã‚Œã‚‹ã‚ˆã†ãªæ—§ãè‰¯ãç”»åƒç‰¹å¾´é‡ã‚’ç”¨ã„ãŸ åˆ†é¡ã‚’è¡Œã†.</p>
<h2 id="äº‹å‰å‡¦ç†">äº‹å‰å‡¦ç†</h2>
<p>æ‰±ã„ã‚„ã™ã•ã®ãŸã‚ã«æ¬¡ã®æƒ…å ±ã‚’ã‚ã–ã¨å¤±ã†</p>
<ul>
<li>è‰²</li>
<li>æ¯”</li>
</ul>
<p>å…·ä½“çš„ã«ã¯ã€ ãƒ¢ãƒã‚¯ãƒ­ã«ã—ã€æ¯”ç‡ã‚’ç„¡è¦–ã—ãŸ200x200ã®å¤§ãã•ã«ãƒªã‚µã‚¤ã‚ºã—ã¦ å‡ºæ¥ãŸç”»åƒã‚’ã€ç›´æ¥æ‰±ã†ã“ã¨ã«ã™ã‚‹. ã¾ãŸã€è¼ªéƒ­ã ã‘ã‚’å–ã‚Šå‡ºã—ãŸã»ã†ãŒè‰¯ã„ç‰¹å¾´é‡ãŒå¾—ã‚‰ã‚Œã‚‹æ°—ãŒã™ã‚‹ã®ã§ã€ãã®ã‚ˆã†ã«ã™ã‚‹.</p>
<blockquote>
<p>æ”¹è‰¯ã¨ã—ã¦ã¯ã€è‰²ã®æƒ…å ±ã‚’ç”¨ã„ã‚‹ã“ã¨. ç”»åƒã«ã¯ã‚«ãƒ©ãƒ¼ç”»åƒã¨ãƒ¢ãƒã‚¯ãƒ­ç”»åƒã¨ãŒã‚ã‚‹ã®ã§ã€ ã¾ãšã©ã¡ã‚‰ã§ã‚ã‚‹ã‹ã‚’åˆ†é¡ã—ã¦ã€ ãã‚Œãã‚Œã§å­¦ç¿’ã—ãŸç•°ãªã‚‹åˆ†é¡å™¨ã‚’ä½œã‚‹ã®ãŒè‰¯ã„ã ã‚ã†. ã¾ãŸã€ä½•ã§åˆ†é¡ã™ã‚‹ã‹ã§ã‚ã‚‹ãŒã€ ä¾‹ãˆã°ç”»åƒã«å†™ã£ãŸé¡”ã§åˆ†é¡ã™ã‚‹ãªã‚‰ã€ é¡”ã‚’æ¤œå‡ºã—ã¦ãã“ã ã‘å–ã‚Šå‡ºã™ã¨ã‹ã¯ã€ æ™®é€šã™ã¹ãã“ã¨ã ã‚ã†. ä»Šå›ã¯ãã“ã¾ã§ã™ã‚‹ã¤ã‚‚ã‚Šã¯ãªã„.</p>
</blockquote>
<p>ãƒ¢ãƒã‚¯ãƒ­ã‚„ãƒªã‚µã‚¤ã‚ºã¯ãƒ„ãƒ¼ãƒ«ã§ç°¡å˜ã«å‡ºæ¥ã‚‹ã«ã—ã¦ã‚‚ã€ è¼ªéƒ­ã‚’å–ã‚Šå‡ºã™ã®ã¯ãã‚“ãªç°¡å˜ã«ã§ãã‚‹ã ã‚ã†ã‹ã€ ã¨ã‚°ã‚°ã£ãŸã‚‰ã™ãã«è¦‹ã¤ã‹ã£ãŸ. ä»Šå›ã¯ <a href="http://www.johf.com/log/20130304b.html">ImageMagick ã§å†™çœŸã®è¼ªéƒ­ã‚’å–ã‚Šå‡ºã™ - Oi!</a> ã‚’å‚è€ƒã«ã™ã‚‹. ãã“ã«è¼‰ã£ã¦ã‚‹ã‚³ãƒãƒ³ãƒ‰ã« <code>-reize</code> ã¨ <code>-monochrome</code> ã ã‘è¿½åŠ ã—ã¦</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">convert</span> -resize 200x200! -segment 1x1 +dither -colors 2 -edge 1 -negate -monochrome in.jpg out.jpg</code></pre></div>
<p>ã¨ãªã‚‹.</p>
<p>ã•ã‚‰ã«ã€<code>jpg</code> ã®ã‚ˆã†ãªãƒã‚¤ãƒŠãƒªã ã¨ãã®ã¾ã¾ã§ã¯èª­ã‚ãªã„ã®ã§ã€ ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦èª­ã‚ã‚‹ <code>ppm</code> ã«ã™ã‚‹ã“ã¨ã«ã™ã‚‹.</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">convert</span> -resize 200x200! -segment 1x1 +dither -colors 2 -edge 1 -negate -monochrome -compress none in.jpg out.ppm</code></pre></div>
<p><img src="../../img/2015/0914-in.jpg" alt="in.jpg" /> <img src="../../img/2015/0914-out.jpg" alt="out.jpg" /></p>
<p>ã“ã‚Œã§ã€ç”»åƒã¯ã‚°ãƒ¬ã‚¤ã‚¹ã‚±ãƒ¼ãƒ«ã®è¡Œåˆ— <span class="math inline">\(E\)</span> ã¨ã—ã¦è¡¨ç¾ã•ã‚Œã‚‹</p>
<p><span class="math display">\[0 \leq E_{i,j} \leq 255 (0 \leq i, j &lt; 400)\]</span></p>
<h2 id="ç”»åƒç‰¹å¾´é‡">ç”»åƒç‰¹å¾´é‡</h2>
<p>ç”»åƒã‚’ã•ã‚‰ã«ã€ç”»åƒã«é©ã—ãŸç‰¹å¾´é‡ (ã‚¢ãƒ•ã‚£ãƒ³å¤‰æ›ã«ä¸åã§ã‚ã‚‹ã¨ã‹äº‘ã€…) ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒå¿…è¦. ã–ã£ãã‚Šã¨ã©ã†ã„ã†ã®ãŒã‚ã‚‹ã®ã‹ã¯ <a href="http://www.slideshare.net/lawmn/siftsurf">ç”»åƒèªè­˜ã®åˆæ­©ã€SIFT,SURFç‰¹å¾´é‡</a> ã‚’èª­ã‚€ã¨è‰¯ã„.</p>
<p>æœ€æ‚ªè‡ªåˆ†ã§å®Ÿè£…ã—ã‚ˆã†ã¨æ€ã£ãŸãŒã€ <a href="http://robwhess.github.io/opensift/">OpenSIFT: An Open-Source SIFT Library</a> ã¦ã®ãŒã‚ã£ãŸã®ã§ã“ã‚Œã‚’ç”¨ã„ã‚‹. ã‚½ãƒ¼ã‚¹ãŒurlå…ˆã§é…å¸ƒã•ã‚Œã¦ã‚‹ã®ã§è‡ªåˆ†ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ä½¿ã†.</p>
<pre><code>./robwhess-opensift-6233815/bin/siftfeat -o hoge sample/out.ppm</code></pre>
<pre><code>Finding SIFT features...
Found 17 features.</code></pre>
<p><code>hoge</code> ã¨ã„ã†ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã€ ã‚ã¨ã¤ã„ã§ã«ã€å¾—ã‚‰ã‚ŒãŸç‰¹å¾´é‡ã‚’å¯è¦–åŒ–ã—ãŸã®ã§ã‚ã‚ã†ç”»åƒ<br />
<img src="../../img/2015/0914-sift.jpg" /> ãŒè¡¨ç¤ºã•ã‚Œã‚‹ (ã¨ã„ã†ã‹ã€ãŸã£ãŸã®17å€‹ã‹ã).</p>
<p>ã“ã® <code>hoge</code> ã‚’å…ƒã«ã€å­¦ç¿’ãƒ»åˆ†é¡ã™ã‚Œã°ã‚ˆã„ã‚ã‘ã§ã‚ã‚‹. ã©ã†ä½¿ãŠã†.</p>
<h3 id="hoge-ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ–¹"><code>hoge</code> ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ–¹</h3>
<p>é ­ã®ã»ã†ã ã‘è¦‹ã¦ã¿ã‚‹ã¨</p>
<pre><code>17 128
46.330449 144.342443 9.258731 2.132983
 13 26 13 87 107 1 0 0 59 62 9 12 100 34 0 0 114 113 12 2
 63 34 2 4 23 45 22 9 35 83 7 7 32 12 2 23 117 87 11 5
 117 42 1 3 54 71 16 20 25 87 21 3 59 117 60 24 23 70 36 9
 6 7 49 90 3 0 0 0 40 117 40 5 83 27 8 2 25 87 42 29
 36 20 13 5 9 66 46 67 9 0 0 0 0 3 44 114 0 0 0 0
 12 25 1 0 3 6 2 0 35 74 33 17 28 6 3 0 0 4 22 96
 6 0 0 0 0 0 0 17
46.330449 144.342443 9.258731 -0.172558
 0 36 45 6 3 1 1 0 1 35 95 8 0 0 0 0 1 10 92 24
 :
 :</code></pre>
<p>ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ã ã‚ã†. ä¸€ã¤ã®ç‰¹å¾´é‡ãŒ <span class="math inline">\(N\)</span> æ¬¡å…ƒã®ç‰¹å¾´é‡ãŒ <span class="math inline">\(M\)</span> å€‹ã‚ã‚‹ã¨ãã€ ä¸€è¡Œç›®ã¯</p>
<pre><code>M N</code></pre>
<p>äºŒè¡Œç›®ä»¥é™ã€<span class="math inline">\(M\)</span> å€‹ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãŒè¤‡æ•°è¡Œã«æ¸¡ã£ã¦ä¸ãˆã‚‰ã‚Œã‚‹. ä¸€ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã“ã†</p>
<pre><code>x y z w
 a1 a2 .. aN</code></pre>
<p><span class="math inline">\(x,y,z,w\)</span> ãŒä½•ã‚’æ„å‘³ã™ã‚‹ã®ã‹ã‚ˆãã‚ã‹ã‚‰ãªã„. ç‰¹å¾´é‡ãŒè¦‹ã¤ã‹ã£ãŸç‚¹ã®åº§æ¨™ã¨é•·ã•ã¨ã€ã‚‚ã†ã²ã¨ã¤ã¯ã€è§’åº¦ï¼Ÿã‹ãªï¼Ÿ</p>
<p><span class="math inline">\(a_1 ... a_N\)</span> ãŒå®Ÿéš›ã®ã€ç‰¹å¾´é‡. é•·ã•ã®æƒ…å ±ã¯ã“ã¡ã‚‰ã«å«ã¾ã‚Œã‚‹ã®ã§ã‚ï¼Ÿ ã¾ãã€ã„ã„ã‚„ã€å®Ÿéš›ã«ä½¿ã†ã®ã¯ã“ã£ã¡ã ã‘ã«ã—ã‚ˆã†.</p>
<h2 id="å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢">å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®æ•´å½¢</h2>
<p>ä¸€ã¤ã®ç”»åƒã‹ã‚‰ã€<span class="math inline">\(M\)</span> å€‹ã®ç‰¹å¾´é‡ãŒè¦‹ã¤ã‹ã£ã¦ã€ å…¨éƒ¨åˆã‚ã›ã‚‹ã¨ <span class="math inline">\(NM\)</span> æ¬¡å…ƒã®ç‰¹å¾´é‡ãŒè¦‹ã¤ã‹ã‚‹. <span class="math inline">\(N\)</span> ã¯ <span class="math inline">\(128\)</span> ã§å›ºå®šã ã‘ã©ã€<span class="math inline">\(M\)</span> ã¯ç”»åƒã«ã‚ˆã£ã¦ç•°ãªã‚‹.</p>
<p>ç”»åƒã”ã¨ã«æ¬¡å…ƒãŒé•ã†ã®ã¯å›°ã‚‹ã®ã§ã€ ã©ã†ã™ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€ ç¢ºã‹ã€ å¤§ãã„ã®ã‹ã‚‰<span class="math inline">\(m\)</span>å€‹æ‹¾ã£ã¦ãã‚‹ã¨ã„ã†ã“ã¨ã‚’ã™ã‚‹ã“ã¨ã§ã€ æ¬¡å…ƒã‚’æƒãˆã‚‹. ã€Œå¤§ãã„ã€ã£ã¦ã©ã†ã‚„ã£ã¦è¦‹ã‚‹ã‚“ã ã‚ã†. <code>hoge</code> ã‚’è¦‹ã‚‹ã¨ã€ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ <span class="math inline">\(x,y,z,w\)</span> ã®é †ã«ä¸¦ã‚“ã§ã‚‹ã¨ã„ã†ã‚ã‘ã§ã‚‚ ãªã„ã‚ˆã†ãªã®ã§ã€ã€Œå¤§ãã„ã€é †ã«å‡ºåŠ›ã•ã‚Œã¦ã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„. ã„ã‚„ãã†ã«é•ã„ãªã„. <span class="math inline">\(m\)</span> å€‹ã«è¶³ã‚Šãªã„å ´åˆã¯ã€ã‚¼ãƒ­ã§åŸ‹ã‚ã‚‹.</p>
<p><code>hoge</code> ã‚’ç°¡å˜ã«ã€å­¦ç¿’ç”¨ã®ãƒ‡ãƒ¼ã‚¿ã«ã—ã‚ˆã†. ãã‚‚ãã‚‚ä½•ã®å­¦ç¿’å™¨ã‚’ç”¨ã„ã‚‹ã‹è€ƒãˆã¦ãªã„ã‘ã©ã€ ã©ã†ã›å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã¿ã‚“ãªæ±ºã¾ã£ã¦ã‚‹.</p>
<p>bashã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ›¸ã„ã¦ã¿ã‚‹.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">m=</span>10 <span class="co"># ä¾‹ãˆã°ã­</span>
<span class="fu">cat</span> hoge <span class="kw">|</span>
<span class="fu">grep</span> <span class="st">&#39;^ &#39;</span> <span class="kw">|</span> <span class="co"># ä½¿ã„ãŸã„ç‰¹å¾´é‡ã¯ã¿ã‚“ãªç©ºç™½ã§å§‹ã¾ã‚‹è¡Œã«æ›¸ã‹ã‚Œã‚‹</span>
<span class="fu">grep</span> -o <span class="st">&#39;[0-9]*&#39;</span> <span class="kw">|</span> <span class="co"># æ•°å­—å˜ä½ã§æ”¹è¡Œ</span>
<span class="fu">head</span> -n <span class="va">$((</span> <span class="va">$m</span> * 128 <span class="va">))</span> <span class="kw">|</span> <span class="co"># ä½¿ã†ã®ã¯æœ€åˆã® m*128 å€‹</span>
<span class="fu">awk</span> <span class="st">&#39;{print $1 + 1}&#39;</span> <span class="kw">|</span> <span class="co"># 0-origin ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã®ã§ 1-originã«ã™ã‚‹</span>
<span class="fu">sort</span> -n <span class="kw">|</span> <span class="fu">uniq</span> -c <span class="kw">|</span> <span class="co"># æ•°ãˆã‚‹</span>
<span class="fu">sed</span> <span class="st">&#39;s/^ *\([0-9]*\) \([0-9]*\)/\2:\1/&#39;</span> <span class="kw">|</span> <span class="co"># &lt;1-origin id&gt;:&lt;å€‹æ•°&gt; ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã™ã‚‹</span>
<span class="fu">tr</span> <span class="st">&#39;\n\&#39;</span> <span class="st">&#39; &#39;</span> <span class="co"># æ”¹è¡Œã‚’ç©ºç™½ã«ç½®æ›</span></code></pre></div>
<p>é‚ªé­”ãªã‚³ãƒ¡ãƒ³ãƒˆã¨æ”¹è¡Œã‚’å–ã‚Šé™¤ãã¨ä¸‹ã®ã‚ˆã†ã«ãªã‚‹</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="va">m=</span>10;
<span class="fu">cat</span> hoge <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^ &#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -o <span class="st">&#39;[0-9]*&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n <span class="va">$((</span> <span class="va">$m</span> * 128 <span class="va">))</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1 + 1}&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -n <span class="kw">|</span> <span class="fu">uniq</span> -c <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^ *\([0-9]*\) \([0-9]*\)/\2:\1/&#39;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;\n\&#39;</span> <span class="st">&#39; &#39;</span></code></pre></div>
<h2 id="å­¦ç¿’">å­¦ç¿’</h2>
<p>ç”»åƒå‡¦ç†ã®åˆ†é‡ã§ã®ä¸»æµãŒåˆ†ã‹ã‚‰ãªã„ã‘ã©ã€ ã¾ã‚ã€åˆ†é¡ã¨ã„ãˆã°SVMã§ã—ã‚‡.</p>
<ul>
<li><a href="http://svmlight.joachims.org/">SVM-Light Support Vector Machine</a></li>
</ul>
<p>ãƒã‚¤ãƒŠãƒªãŒé…å¸ƒã•ã‚Œã¦ã„ã¦ãã®ã¾ã¾ä½¿ãˆã‚‹.</p>
<p>å­¦ç¿’ãƒ»ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã¯ã€ ä¸€è¡Œã«ä¸€ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ›¸ã„ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«. ä¸€ã¤ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯ã€</p>
<pre><code>&lt;target&gt;\t&lt;1-origin id&gt;:&lt;weight&gt;\t...&lt;1-origin id&gt;:&lt;weight&gt;</code></pre>
<p><code>&lt;target&gt;</code> ã¯ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®åˆ†é¡çµæœ. å­¦ç¿’ã®å ´åˆã«ã¯ã€<code>1</code> ã¾ãŸã¯ <code>-1</code> ã¨æ›¸ã. çµæœãŒã‚ã‹ã‚‰ãªã„å ´åˆã«ã¯é©å½“ã«æ›¸ã„ã¦ãŠã‘ã°ã„ã„ (<code>0</code> ã¨ã‹æ›¸ã„ã¨ã‘ã°ã„ã„?).</p>
<p><code>&lt;1-origin id&gt;:&lt;weight&gt;</code> ã¯å…ˆã»ã©ä½œã£ãŸã‚‚ã®ã‚’ãã®ã¾ã¾ç”¨ã„ã‚Œã°ã‚ˆã„. å…ˆã»ã©ã®ã§ã¯ <code>&lt;weight&gt;</code> ã¨ã—ã¦ã€ãã®IDã®å‡ºç¾å›æ•°ã‚’ç”¨ã„ãŸ. æ™®é€šã¯æ­£è¦åŒ–ãã‚‰ã„ã™ã‚‹ã‚ãª (<code>ç‰¹å¾´é‡æ­£è¦åŒ–</code>). å¤§æŠµã®å ´åˆã€æ­£è¦åŒ–ã¯ã™ã‚‹ã»ã†ãŒã‚ˆã„.</p>
<p>æ”¹ã‚ã¦æ›¸ãã¨ã€</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">(</span> <span class="bu">echo</span> -n <span class="st">&#39;1 &#39;</span><span class="kw">;</span> <span class="fu">cat</span> hoge <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^ &#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -o <span class="st">&#39;[0-9]*&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n <span class="va">$((</span> <span class="va">$m</span> * 128 <span class="va">))</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1 + 1}&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -n <span class="kw">|</span> <span class="fu">uniq</span> -c <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^ *\([0-9]*\) \([0-9]*\)/\2:\1/&#39;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;\n&#39;</span> <span class="st">&#39; &#39;</span> <span class="kw">;</span> <span class="bu">echo</span> <span class="kw">)</span> <span class="op">&gt;</span> <span class="ex">train</span>
<span class="ex">svm_learn</span> ./train</code></pre></div>
<p>ã£ã¦æ„Ÿã˜ (ã“ã‚Œã¯è¨“ç·´äº‹ä¾‹1ã¤ã ã‘ã§è¨“ç·´ã—ãŸã‚‚ã®).</p>
<p>é“å…·ã¯æƒã£ãŸã®ã§ã€ã‚ã¨ã¯ã‚„ã£ã¦ã¿ã‚‹ã ã‘. ç”»åƒã¯å…ƒã€…æŒã£ã¦ã‚‹ã®ã‚’ä½¿ã†.</p>
<p>ã€Œã‚†ã‚†å¼ã€ã®ç”»åƒ54æšã‚’ãƒã‚¸ãƒ†ã‚£ãƒ–ã¨ã™ã‚‹. (ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã˜ã‚ƒãªãã¦ã‚¢ãƒ‹ãƒ¡ã‚’ç›´æ¥ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã™ã‚‹ã®ã¯ã€ æœ¬å½“ã¯ã©ã†ã‹ã¨æ€ã†) æ€ã£ãŸã‚ˆã‚Šæ‰‹æŒã¡ãŒå°‘ãªã‹ã£ãŸ. ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼ˆã€Œã‚†ã‚†å¼ã€ã§ã¯ãªã„ç”»åƒï¼‰ã¯ã„ãã‚‰ã§ã‚‚ã‚ã‚‹ã®ã ã‘ã©ã€ ãƒã‚¸ãƒ†ã‚£ãƒ–ã«å¯¾ã—ã¦æ¥µç«¯ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ãŒå¤šã„ã¨è‰¯ããªã„ã®ã§ã€ åŒã˜54æšã ã‘ä½¿ã†ã“ã¨ã«ã™ã‚‹.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>

<span class="va">m=</span>70

<span class="bu">:</span> <span class="op">&gt;</span> ./train

<span class="va">target=</span>1
<span class="kw">for</span> <span class="ex">f</span> in <span class="kw">`</span><span class="fu">cat</span> posimgs<span class="kw">`;</span> <span class="kw">do</span>
  <span class="ex">convert</span> -resize 200x200! -segment 1x1 +dither -colors 2 -edge 1 -negate -monochrome -compress none <span class="va">$f</span> out.ppm
  <span class="ex">./robwhess-opensift-6233815/bin/siftfeat</span> -x -o sift.txt out.ppm
  <span class="kw">(</span>
  <span class="bu">echo</span> -n <span class="st">&quot;</span><span class="va">$target</span><span class="st"> &quot;</span><span class="kw">;</span>
  <span class="fu">cat</span> sift.txt <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^ &#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -o <span class="st">&#39;[0-9]*&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n <span class="va">$((</span> <span class="va">$m</span> * 128 <span class="va">))</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1 + 1}&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -n <span class="kw">|</span> <span class="fu">uniq</span> -c <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^ *\([0-9]*\) \([0-9]*\)/\2:\1/&#39;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;\n&#39;</span> <span class="st">&#39; &#39;</span> <span class="kw">;</span>
  <span class="bu">echo</span> <span class="kw">)</span> <span class="op">&gt;&gt;</span> <span class="ex">train</span>
<span class="kw">done</span>

<span class="va">target=</span>-1
<span class="kw">for</span> <span class="ex">f</span> in <span class="kw">`</span><span class="fu">cat</span> negimgs<span class="kw">`;</span> <span class="kw">do</span>
  <span class="ex">convert</span> -resize 200x200! -segment 1x1 +dither -colors 2 -edge 1 -negate -monochrome -compress none <span class="va">$f</span> out.ppm
  <span class="ex">./robwhess-opensift-6233815/bin/siftfeat</span> -x -o sift.txt out.ppm
  <span class="kw">(</span>
  <span class="bu">echo</span> -n <span class="st">&quot;</span><span class="va">$target</span><span class="st"> &quot;</span><span class="kw">;</span>
  <span class="fu">cat</span> sift.txt <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^ &#39;</span> <span class="kw">|</span> <span class="fu">grep</span> -o <span class="st">&#39;[0-9]*&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n <span class="va">$((</span> <span class="va">$m</span> * 128 <span class="va">))</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $1 + 1}&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> -n <span class="kw">|</span> <span class="fu">uniq</span> -c <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^ *\([0-9]*\) \([0-9]*\)/\2:\1/&#39;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;\n&#39;</span> <span class="st">&#39; &#39;</span> <span class="kw">;</span>
  <span class="bu">echo</span> <span class="kw">)</span> <span class="op">&gt;&gt;</span> <span class="ex">train</span>
<span class="kw">done</span>

<span class="ex">svm_learn</span> ./train a.model</code></pre></div>
<pre><code>Runtime for XiAlpha-estimates in cpu-seconds: 0.00
XiAlpha-estimate of the error: error&lt;=93.58% (rho=1.00,depth=0)
XiAlpha-estimate of the recall: recall=&gt;7.27% (rho=1.00,depth=0)
XiAlpha-estimate of the precision: precision=&gt;7.27% (rho=1.00,depth=0)
Number of kernel evaluations: 3822</code></pre>
<p>å…¨ç„¶ãƒ€ãƒ¡ã¨èª­ã‚€.</p>
<p><code>convert</code> ã§ã®äº‹å‰å‡¦ç†ã‚’çœã„ãŸã‚Šã€ ä½¿ã†ç‰¹å¾´é‡ã‚’å¢—ã‚„ã—ãŸã‚Šã—ãŸã‘ã©å…¨ç„¶ãƒ€ãƒ¡ã ã£ãŸ</p>
</body>
</html>
