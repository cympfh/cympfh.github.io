% Mon May 14 2018

## 日記 - Zsh: C-o で RPROMPT の表示・非表示をトグルする

日記です。

Macだとデスクトップのカスタマイズに制限がありすぎて、デスクトップの右上（ステータスメニューみたいなところ）に好きな文字列を表示させるのすらつらい。
ターミナルならいつも開いているので、その中に表示させることにする。
ターミナルの中で GNU screen を開いてその中で zsh がいつも起動している。
GNU screen の表示は必要最小限にすると決めているので zsh の中に表示することにする。
となるとプロンプトをいじる。
zsh のプロンプトには普通の `PROMPT` と、右端に寄せて表示してくれる `RPROMPT` とがある。
わたしは `RPROMPT` は使ってこなかった。
理由としては、ごちゃごちゃさせたくないのと、ターミナルの上でテキストコピーさせると、 `RPROMPT` が表示されていると、大量に並んだスペース記号のあとに `PROMPT` の中身まで一緒にコピーされてしまうから。

そこでタイトルのようにする。
見たいときだけ `C-o` で一時的に表示してすぐ消すという使い方ができる。

書いてて本当に便利なのか疑問が生じてきた。
一週間くらい使ってみて感想を書きます。

以下コード

```sh
# .zshrc

rprompt-toggle() {
    if [ -z "$RPROMPT" ]; then
        TWITTER=$( cat ~/.twurlrc | grep -A 1 default_profile | tail -1 | sed 's/ *- *//g' )  # ログインしてるアカウント
        RPROMPT="@$TWITTER"
    else
        RPROMPT=
    fi
    zle reset-prompt
}
zle -N rprompt-toggle
bindkey "^O" rprompt-toggle
```

