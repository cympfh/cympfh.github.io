<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>層の射、直積、冪、evaluation</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../resources/css/c.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header class="page-header">
    <a href='index.html'><i class="fa fa-stumbleupon" style="position:absolute; left:0.4em; top:0.4em; width:1.3em;border-radius:0.8em;"></i></a>
</header>
<header>
<h1 class="title">層の射、直積、冪、evaluation</h1>
</header>
<p class="date" style="text-align: right">
2018-08-19 (Sun.)
</p>
<div class="is-pulled-right">
<p><a class='tag is-red' href=index.html#層>層</a></p>
</div>
<h2 id="層の定義">層の定義</h2>
<p>ここでは次のような形のものを層と呼ぶ.</p>
<div class="thm">
<p>位相空間 <span class="math inline">\((X, \mathcal O_X)\)</span> の上の層 <span class="math inline">\(A\)</span> とは集合 <span class="math inline">\(A\)</span> に</p>
<ul>
<li>関数 <span class="math inline">\(E : A \to \mathcal O_X\)</span></li>
<li>二項演算 <span class="math inline">\(\rceil : A \times \mathcal O_X \to A; a \rceil U \in A\)</span></li>
</ul>
<p>を加えたもののこと. ただし次の4つが要請される.</p>
<ol type="1">
<li>任意の <span class="math inline">\(a, b \in A\)</span> に対して、<span class="math inline">\(a \rceil \emptyset = b \rceil \emptyset\)</span></li>
<li><span class="math inline">\(a \rceil (Ea) = a\)</span></li>
<li><span class="math inline">\(E (a \rceil U) = Ea \cap U\)</span></li>
<li><span class="math inline">\((a \rceil U) \rceil V = a \rceil (U \cap V)\)</span></li>
</ol>
</div>
<p>ちなみに演算の優先度は, <span class="math inline">\(E\)</span> (関数適用) <span class="math inline">\(&gt;\)</span> <span class="math inline">\(\cap &gt; ~ \rceil\)</span> .</p>
<h2 id="層の射">層の射</h2>
<p>層 <span class="math inline">\(A, B\)</span> の間の射 <span class="math inline">\(A \to B\)</span> とは, (2つを集合と見た時の) 関数 <span class="math inline">\(f : A \to B\)</span> であって,</p>
<ol type="1">
<li><span class="math inline">\(E(fa) = Ea\)</span></li>
<li><span class="math inline">\(f(a \rceil U) = f(a) \rceil U\)</span></li>
</ol>
<p>とあること. <span class="math inline">\(f\)</span> が層 <span class="math inline">\(A\)</span> から <span class="math inline">\(B\)</span> への射であることを, 関数の時と全く同様に <span class="math display">\[f : A \to B\]</span> と書いて表す.</p>
<p>下は <span class="math inline">\(f\)</span> が射になるための関数レベルの可換図式</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="161pt" height="116pt" viewBox="0.00 0.00 160.55 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>
%3
</title>
<!-- A -->
<g id="node1" class="node">
<title>
A
</title>
<text text-anchor="middle" x="27" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#000000">A</text> </g> <!-- B --> <g id="node2" class="node">
<title>
B
</title>
<text text-anchor="middle" x="27" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">B</text> </g> <!-- A&#45;&gt;B --> <g id="edge1" class="edge">
<title>
A-&gt;B
</title>
<path fill="none" stroke="#000000" d="M27,-71.5867C27,-63.9407 27,-54.8916 27,-46.4274"/> <polygon fill="#000000" stroke="#000000" points="27,-36.1686 31.5001,-46.1686 27,-41.1686 27.0001,-46.1686 27.0001,-46.1686 27.0001,-46.1686 27,-41.1686 22.5001,-46.1687 27,-36.1686 27,-36.1686"/> <text text-anchor="middle" x="17" y="-49.8" font-family="Times,serif" font-size="14.00" fill="#000000">f</text> </g> <!-- O_X --> <g id="node3" class="node">
<title>
O_X
</title>
<text text-anchor="middle" x="125.5518" y="-48.8" font-family="Times,serif" font-size="14.00" fill="#000000">O_X</text> </g> <!-- A&#45;&gt;O_X --> <g id="edge2" class="edge">
<title>
A-&gt;O_X
</title>
<path fill="none" stroke="#000000" d="M54.1906,-79.7916C64.9622,-75.7476 77.5092,-71.037 89.0516,-66.7035"/> <polygon fill="#000000" stroke="#000000" points="98.4499,-63.175 90.6697,-70.9028 93.7689,-64.9325 89.088,-66.6899 89.088,-66.6899 89.088,-66.6899 93.7689,-64.9325 87.5063,-62.4771 98.4499,-63.175 98.4499,-63.175"/> <text text-anchor="middle" x="76.2759" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#000000">E</text> </g> <!-- B&#45;&gt;O_X --> <g id="edge3" class="edge">
<title>
B-&gt;O_X
</title>
<path fill="none" stroke="#000000" d="M54.1906,-27.6566C64.8545,-31.4438 77.2584,-35.849 88.705,-39.9141"/> <polygon fill="#000000" stroke="#000000" points="98.4499,-43.375 87.5205,-44.2688 93.7382,-41.7016 89.0265,-40.0282 89.0265,-40.0282 89.0265,-40.0282 93.7382,-41.7016 90.5326,-35.7877 98.4499,-43.375 98.4499,-43.375"/> <text text-anchor="middle" x="76.2759" y="-39.8" font-family="Times,serif" font-size="14.00" fill="#000000">E</text> </g> </g>
</svg>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="157pt" height="117pt" viewBox="0.00 0.00 156.66 117.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 113)">
<title>
%3
</title>
<!-- A -->
<g id="node1" class="node">
<title>
A
</title>
<text text-anchor="middle" x="27" y="-86.8" font-family="Times,serif" font-size="14.00" fill="#000000">A</text> </g> <!-- A2 --> <g id="node2" class="node">
<title>
A2
</title>
<text text-anchor="middle" x="27" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">A</text> </g> <!-- A&#45;&gt;A2 --> <g id="edge1" class="edge">
<title>
A-&gt;A2
</title>
<path fill="none" stroke="#000000" d="M27,-72.9096C27,-64.8313 27,-55.1231 27,-46.1312"/> <polygon fill="#000000" stroke="#000000" points="27,-36.0449 31.5001,-46.0449 27,-41.0449 27.0001,-46.0449 27.0001,-46.0449 27.0001,-46.0449 27,-41.0449 22.5001,-46.045 27,-36.0449 27,-36.0449"/> <text text-anchor="middle" x="14.6211" y="-52.6789" font-family="Times,serif" font-size="14.00" fill="#000000">⌉U</text> </g> <!-- B --> <g id="node4" class="node">
<title>
B
</title>
<text text-anchor="middle" x="121.6621" y="-86.8" font-family="Times,serif" font-size="14.00" fill="#000000">B</text> </g> <!-- A&#45;&gt;B --> <g id="edge3" class="edge">
<title>
A-&gt;B
</title>
<path fill="none" stroke="#000000" d="M54.1264,-91C63.5336,-91 74.2518,-91 84.3352,-91"/> <polygon fill="#000000" stroke="#000000" points="94.5318,-91 84.5318,-95.5001 89.5318,-91 84.5318,-91.0001 84.5318,-91.0001 84.5318,-91.0001 89.5318,-91 84.5317,-86.5001 94.5318,-91 94.5318,-91"/> <text text-anchor="middle" x="74.3311" y="-93.8" font-family="Times,serif" font-size="14.00" fill="#000000">f</text> </g> <!-- B2 --> <g id="node3" class="node">
<title>
B2
</title>
<text text-anchor="middle" x="121.6621" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">B</text> </g> <!-- A2&#45;&gt;B2 --> <g id="edge2" class="edge">
<title>
A2-&gt;B2
</title>
<path fill="none" stroke="#000000" d="M54.1264,-18C63.5336,-18 74.2518,-18 84.3352,-18"/> <polygon fill="#000000" stroke="#000000" points="94.5318,-18 84.5318,-22.5001 89.5318,-18 84.5318,-18.0001 84.5318,-18.0001 84.5318,-18.0001 89.5318,-18 84.5317,-13.5001 94.5318,-18 94.5318,-18"/> <text text-anchor="middle" x="74.3311" y="-20.8" font-family="Times,serif" font-size="14.00" fill="#000000">f</text> </g> <!-- B&#45;&gt;B2 --> <g id="edge4" class="edge">
<title>
B-&gt;B2
</title>
<path fill="none" stroke="#000000" d="M121.6621,-72.9096C121.6621,-64.8313 121.6621,-55.1231 121.6621,-46.1312"/> <polygon fill="#000000" stroke="#000000" points="121.6621,-36.0449 126.1622,-46.0449 121.6622,-41.0449 121.6622,-46.0449 121.6622,-46.0449 121.6622,-46.0449 121.6622,-41.0449 117.1622,-46.045 121.6621,-36.0449 121.6621,-36.0449"/> <text text-anchor="middle" x="109.2832" y="-52.6789" font-family="Times,serif" font-size="14.00" fill="#000000">⌉U</text> </g> </g>
</svg>
<h3 id="恒等射">恒等射</h3>
<p>層 <span class="math inline">\(A\)</span> から <span class="math inline">\(A\)</span> 自身への射として自明なものとして恒等写像があり, これを <span class="math inline">\(1\)</span> と書くことにする. <span class="math display">\[1 : A \to A\]</span> <span class="math display">\[1(a) = a\]</span></p>
<h2 id="層の直積">層の直積</h2>
<p>2つの層 <span class="math inline">\(A, B\)</span> があるとき, 新しい層 <span class="math inline">\(A \times B\)</span> を構成してこれを <span class="math inline">\(A\)</span> と <span class="math inline">\(B\)</span> との直積と呼ぶ. 集合の (カルテシアン) 直積とは異なる (寧ろその部分集合) ので注意.</p>
<ul>
<li><span class="math inline">\(A \times B = \{ (a, b) | a \in A, b \in B, Ea = Eb \}\)</span>
<ul>
<li><span class="math inline">\((a, b) \rceil U = (a \rceil U, b \rceil U)\)</span></li>
<li><span class="math inline">\(E(a, b) = Ea ~(= Eb)\)</span></li>
</ul></li>
</ul>
<blockquote>
<p>明らかに <span class="math inline">\(A \times A \simeq A\)</span> である</p>
</blockquote>
<h3 id="射影">射影</h3>
<p>層の直積 <span class="math inline">\(A \times B\)</span> に対して次の2つが射としてある.</p>
<ul>
<li><span class="math inline">\(A \times B \to A\)</span>
<ul>
<li><span class="math inline">\(\pi_1 (a, b) = a\)</span></li>
</ul></li>
<li><span class="math inline">\(A \times B \to B\)</span>
<ul>
<li><span class="math inline">\(\pi_2 (a, b) = b\)</span></li>
</ul></li>
</ul>
<h3 id="射の積">射の積</h3>
<p>層 <span class="math inline">\(A,B,C,D\)</span> とそれらの間の2つの射</p>
<ul>
<li><span class="math inline">\(f: A \to B\)</span></li>
<li><span class="math inline">\(g: C \to D\)</span></li>
</ul>
<p>があるとき自然に</p>
<ul>
<li><span class="math inline">\(f \times g : A \times C \to B \times D\)</span></li>
<li><span class="math inline">\((f \times g)(a, c) = (f a, g c)\)</span></li>
</ul>
<p>という射 <span class="math inline">\(f \times g\)</span> を定義することができる.</p>
<p>念の為に確認すると,</p>
<p><span class="math inline">\(f,g\)</span> が射であることから <span class="math inline">\(E(f a) = Ea\)</span> と <span class="math inline">\(E g(c) = Ec\)</span> が従い, <span class="math inline">\((a,c) \in A \times C\)</span> であることから <span class="math inline">\(Ea=Ec\)</span> である. 従って <span class="math inline">\(E(f a)=E(g c)\)</span> なので <span class="math inline">\((f a, g c) \in B \times D\)</span> であることが分かって well-defined である.</p>
<h2 id="層の冪">層の冪</h2>
<p>集合 <span class="math inline">\(A, B\)</span> に対して集合 <span class="math inline">\(B^A\)</span> を <span class="math inline">\(A\)</span> から <span class="math inline">\(B\)</span> への写像全体として定めたのと同様のことを層についても定める. 写像の代わりにちょうど層間の射 (のようなもの) を用いる.</p>
<p>層 <span class="math inline">\(A, B\)</span> があるとき層 <span class="math inline">\(B^A\)</span> を定めてこれを冪と呼ぶ.</p>
<ul>
<li><span class="math inline">\(B^A = \{ (f, V) | \text{関数}~f : A \to B, V \in \mathcal O_X \}\)</span>
<ul>
<li><span class="math inline">\(E(f,V) = V\)</span></li>
<li><span class="math inline">\((f,V) \rceil U = (f&#39;, V \cap U)\)</span>
<ul>
<li><span class="math inline">\(f&#39;\)</span> は <span class="math inline">\(A \to B\)</span> なる関数であって,</li>
<li><span class="math inline">\(f&#39;(a) = f(a \rceil U)\)</span></li>
</ul></li>
<li>ただし <span class="math inline">\((f, V) \in B^A\)</span> について次の2つを要請する:
<ul>
<li><span class="math inline">\(E(fa) = Ea \cap V\)</span></li>
<li><span class="math inline">\(f(a \rceil U) = f(a) \rceil U\)</span></li>
</ul></li>
</ul></li>
</ul>
<p>さて, 元 <span class="math inline">\((f,V) \in B^A\)</span> を, ただ単に <span class="math inline">\(f \in B^A\)</span> と書くことにする. このとき <span class="math inline">\(f\)</span> には <span class="math inline">\(Ef (=V) \in \mathcal O_X\)</span> というデータが伴っているものとする. 単なる略記だと思えばよい. 例えば同じ一つの <span class="math inline">\(f\)</span> について異なる2元 <span class="math inline">\((f, V_1), (f, V_2)\)</span> が <span class="math inline">\(B^A\)</span> に含まれることはありえるので, この2つを単に <span class="math inline">\(f\)</span> と書いてしまうと区別ができないが, <span class="math inline">\(Ef\)</span> というデータが暗に持たされているのであくまで異なるものと考える. (例えば一方を <span class="math inline">\(f_1\)</span> と書いてもう一方を <span class="math inline">\(f_2\)</span> と書くなど.)</p>
<p>この略記を用いて改めて <span class="math inline">\(B^A\)</span> の定義を書くと次のようになる.</p>
<ul>
<li><span class="math inline">\(B^A = \{ f | \text{関数}~f : A \to B \}\)</span>
<ul>
<li><span class="math inline">\(Ef \in \mathcal O_X\)</span>
<ul>
<li>(要請はあるがそれを満たすなら自由に定めてよい)</li>
</ul></li>
<li><span class="math inline">\(f \rceil U\)</span> は次のような関数 <span class="math inline">\(f&#39; : A \to B\)</span>
<ul>
<li><span class="math inline">\(f&#39;(a) = f(a \rceil U)\)</span></li>
</ul></li>
<li>ただし
<ul>
<li><span class="math inline">\(E(fa) = Ea \cap Ef\)</span></li>
<li><span class="math inline">\(f(a \rceil U) = f(a) \rceil U\)</span></li>
</ul></li>
</ul></li>
</ul>
<blockquote>
<p><span class="math inline">\(f \in B^A\)</span> は射そのものではない. 射の第二の要請は定義に含まれるため満たされるが, 第一の要請 <span class="math inline">\(E(fa)=Ea\)</span> は一般には定義からは従わない.</p>
</blockquote>
<h2 id="evaluation">evaluation</h2>
<p><span class="math inline">\(f \in B^A\)</span> は関数であるので <span class="math inline">\(a \in A\)</span> を関数適用することができる. この関数適用という操作自体が射であることを見ていく.</p>
<div class="thm">
<p>関数 <span class="math inline">\(ev\)</span> を次のように定める. <span class="math display">\[ev : A \times B^A \to B\]</span> <span class="math display">\[ev : (a, f) \to f(a)\]</span></p>
</div>
<p>ただしこの定義域の直積は <strong>層の直積</strong> であることに注意. すなわち, <span class="math inline">\((a,f) \in A \times B^A\)</span> には <span class="math inline">\(E(a,f)=Ea=Ef\)</span> という制約がある.</p>
<div class="thm">
<p>関数 <span class="math inline">\(ev\)</span> は射である.</p>
<p>射の定義に照らしあわせて証明する.</p>
<ol type="i">
<li><span class="math display">\[\begin{align*}
E(ev(a,f))
&amp; = E(f(a))     &amp; \cdots \text{関数evの評価} \\
&amp; = Ef \cap Ea  &amp; \cdots f \in B^A \text{ なので} \\
&amp; = E(a,f)      &amp; \cdots \text{層の直積}
\end{align*}\]</span></li>
<li><span class="math display">\[\begin{align*}
ev((a,f) \rceil U)
&amp; = ev (a \rceil U, f \rceil U) &amp; \cdots \text{直積の制限} \\
&amp; = (f \rceil U)(a \rceil U)    &amp; \cdots \text{関数evの評価} \\
&amp; = f((a \rceil U) \rceil U)    &amp; \cdots \text{冪の制限} \\
&amp; = f(a \rceil U)     &amp; \\
&amp; = fa \rceil U       &amp; \cdots \because f \in B^A \\
&amp; = ev(a, f) \rceil U &amp; \cdots \text{関数evを逆に使った}
\end{align*}\]</span></li>
</ol>
</div>
<h3 id="冪の普遍性">冪の普遍性</h3>
<div class=thm>
<p>層 <span class="math inline">\(A,B,C\)</span> と射 <span class="math inline">\(g : A \times C \to B\)</span> があるとき, 次を可換にする射 <span class="math inline">\(h : C \to B^A\)</span> が <span class="math inline">\(g\)</span> に対して唯一存在する.</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="171pt" height="116pt" viewBox="0.00 0.00 171.24 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>
%3
</title>
<!-- A×C -->
<g id="node1" class="node">
<title>
A×C
</title>
<text text-anchor="middle" x="30.0117" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#000000">A×C</text> </g> <!-- B --> <g id="node2" class="node">
<title>
B
</title>
<text text-anchor="middle" x="136.2373" y="-48.8" font-family="Times,serif" font-size="14.00" fill="#000000">B</text> </g> <!-- A×C&#45;&gt;B --> <g id="edge1" class="edge">
<title>
A×C-&gt;B
</title>
<path fill="none" stroke="#000000" d="M57.0918,-80.5676C69.9522,-76.0881 85.5179,-70.6663 99.4306,-65.8203"/> <polygon fill="#000000" stroke="#000000" points="109.2067,-62.4152 101.2434,-69.9542 104.4849,-64.0599 99.7632,-65.7046 99.7632,-65.7046 99.7632,-65.7046 104.4849,-64.0599 98.2829,-61.455 109.2067,-62.4152 109.2067,-62.4152"/> <text text-anchor="middle" x="84.6304" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#000000">g</text> </g> <!-- A×B^A --> <g id="node3" class="node">
<title>
A×B^A
</title>
<text text-anchor="middle" x="30.0117" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">A×B^A</text> </g> <!-- A×C&#45;&gt;A×B^A --> <g id="edge2" class="edge">
<title>
A×C-&gt;A×B^A
</title>
<path fill="none" stroke="#000000" d="M30.0117,-71.5867C30.0117,-63.9407 30.0117,-54.8916 30.0117,-46.4274"/> <polygon fill="#000000" stroke="#000000" points="30.0117,-36.1686 34.5118,-46.1686 30.0118,-41.1686 30.0118,-46.1686 30.0118,-46.1686 30.0118,-46.1686 30.0118,-41.1686 25.5118,-46.1687 30.0117,-36.1686 30.0117,-36.1686"/> <text text-anchor="middle" x="20.0117" y="-49.8" font-family="Times,serif" font-size="14.00" fill="#000000">1×h</text> </g> <!-- A×B^A&#45;&gt;B --> <g id="edge3" class="edge">
<title>
A×B^A-&gt;B
</title>
<path fill="none" stroke="#000000" d="M60.1676,-27.936C72.2674,-31.9227 86.3356,-36.558 99.0592,-40.7503"/> <polygon fill="#000000" stroke="#000000" points="108.9118,-43.9966 98.0058,-45.1411 104.1629,-42.4319 99.414,-40.8671 99.414,-40.8671 99.414,-40.8671 104.1629,-42.4319 100.8223,-36.5931 108.9118,-43.9966 108.9118,-43.9966"/> <text text-anchor="middle" x="84.6304" y="-40.8" font-family="Times,serif" font-size="14.00" fill="#000000">ev</text> </g> </g>
</svg>
</div>
<p>この定理は <span class="math inline">\(A\times C \to B\)</span> という射全体と, <span class="math inline">\(C \to B^A\)</span> という射全体とが一対一対応してることを言っている (随伴).</p>
<p>証明は, 図式を可換にするような射 <span class="math inline">\(h\)</span> が少なくとも1つは存在することと, このようなものが存在するならばそれらは等しいために唯一であることを示すという二工程に分けることにする.</p>
<h4 id="証明存在性">証明・存在性</h4>
<p>まず関数 <span class="math inline">\(h : C \to B^A\)</span> を定義して, これが確かに射であることを確認する. 関数としては <span class="math inline">\(c \in C\)</span> に対して <span class="math inline">\(f_c \in B^A\)</span> とその <span class="math inline">\(Ef_c\)</span> (あるいは <span class="math inline">\((f_c, Ef_c) \in B^A\)</span>) を, 先の図式が可換になるように割り当ててやればよい.</p>
<p>可換であるとはつまり, <span class="math inline">\((a, c) \in A \times C\)</span> について次の2つ</p>
<ul>
<li><span class="math inline">\(g(a, c)\)</span>,</li>
<li><span class="math inline">\(ev((1 \times h)(a, c)) = ev(a, hc) = (hc)(a) = f_c(a)\)</span></li>
</ul>
<p>が等しいこと. そのようにしたいので, これをそのまま <span class="math display">\[f_c(a) = g(a, c)\]</span> として <span class="math inline">\(f_c\)</span> を定めればよい (仮の定義).</p>
<p>ただし注意として, 今考えた <span class="math inline">\((a, c)\)</span> は直積から取ってきた点であるので <span class="math inline">\(Ea=Ec\)</span> という制約があり, 全ての点の <span class="math inline">\(a\)</span> について <span class="math inline">\(f_c(a)\)</span> の値が定まっているわけではない. しかしながら <span class="math inline">\(f_c\)</span> は一般に <span class="math inline">\(A \to B\)</span> なる関数である必要があるので, 先程の <span class="math inline">\(f_c\)</span> の定義では未だ部分関数でしかない.</p>
<p>修正をします. <span class="math display">\[f_c(a) = g(a \rceil Ec, c \rceil Ea)\]</span> 注意として <span class="math inline">\((a,c) \in A \times C (\iff Ea=Ec)\)</span> については, 相変わらず <span class="math inline">\(f_c(a)=g(a,c)\)</span> を満たしているので可換性は守られている.</p>
<p>というわけで <span class="math inline">\(c \in C\)</span> に対して関数 <span class="math display">\[f_c : A \to B\]</span> を定義することができた.</p>
<p>次に <span class="math inline">\(Ef_c \in \mathcal O_X\)</span> という値を定める. これは <span class="math inline">\(f_c\)</span> とは独立に決めて良よくて, ここでは <span class="math display">\[Ef_c = Ec\]</span> と定める. これは, 関数 <span class="math inline">\(h\)</span> を <span class="math inline">\(h(c)=f_c\)</span> という風に定めるつもりでいるのだが, <span class="math inline">\(h\)</span> が射であるようにするために <span class="math display">\[E(hc)=Ec\]</span> となる必要があるので, そのために自動的に決まる.</p>
<p>次に, 関数 <span class="math inline">\(h : C \to B^A\)</span> を定義する. <span class="math display">\[h(c) = (f_c, Ef_c) = (f_c, Ec)\]</span> とすればよい. ただしこれが well-defined であることを確認する必要がある. つまり <span class="math inline">\(f_c \in B^A\)</span> であるかだが, これは下のように確かめられる.</p>
<div class="thm">
<p><span class="math inline">\(f_c \in B^A\)</span> の証明.</p>
<p>冪の定義に従って, 次の2つを確かめれば良い.</p>
<ol type="i">
<li><span class="math inline">\(E(f_c(a)) = Ea \cap Ef_c\)</span></li>
<li><span class="math inline">\(f_c(a \rceil U) = f_c(a) \rceil U\)</span></li>
</ol>
<p>1つ目は <span class="math display">\[\begin{align*}
E(f_c(a))
&amp; = E(g(a \rceil Ec, c \rceil Ea))     &amp; \cdots f_c \text{ の定義} \\
&amp; = E(a \rceil Ec, c \rceil Ea)        &amp; \cdots g \text{ は射} \\
&amp; = Ea \rceil Ec                       &amp; \cdots \text{ 直積の E の定義}\\
&amp; = Ea \rceil Ef_c
\end{align*}\]</span> なので.</p>
<p>2つ目は <span class="math display">\[\begin{align*}
f_c(a \rceil U)
&amp; = g(a \rceil U \rceil Ec, c \rceil Ea \rceil U)     &amp; \cdots f_c \text{ の定義} \\
&amp; = g(a \rceil Ec, c \rceil Ea) \rceil U              &amp; \cdots \text{ 直積の制限} \\
&amp; = f_c(a) \rceil U
\end{align*}\]</span> なので.</p>
</div>
<p>以上で関数 <span class="math display">\[h : C \to B^A\]</span> <span class="math display">\[h(c) = (f_c, Ef_c)\]</span> が定義された!</p>
<p>次に <span class="math inline">\(h\)</span> が射であることを確認する.</p>
<ol type="i">
<li><span class="math inline">\(E(hc) = Ef_c=Ec\)</span></li>
<li><span class="math inline">\(h(c \rceil U) = (f_{c \rceil U}, Ef_{c \rceil U}) = (f_{c \rceil U}, E(c \rceil U))\)</span>
<ul>
<li><span class="math inline">\(f_{c \rceil U}(a) = g(a \rceil Ec \cap U, c \rceil U \rceil Ea) = f_c(a) \rceil U = (f_c \rceil U)(a)\)</span>
<ul>
<li>よって (関数として) <span class="math inline">\(f_{c \rceil U} = f_c \rceil U\)</span></li>
</ul></li>
<li><span class="math inline">\(Ef_{c \rceil U} = E(c \rceil U) = Ec \cap U = E(f_c \rceil U)\)</span>
<ul>
<li>以上2つより <span class="math inline">\(h(c \rceil U) = hc \rceil U\)</span></li>
</ul></li>
</ul></li>
</ol>
であるので確かに,
<center>
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="171pt" height="116pt" viewBox="0.00 0.00 171.24 116.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 112)">
<title>
%3
</title>
<!-- A×C -->
<g id="node1" class="node">
<title>
A×C
</title>
<text text-anchor="middle" x="30.0117" y="-85.8" font-family="Times,serif" font-size="14.00" fill="#000000">A×C</text> </g> <!-- B --> <g id="node2" class="node">
<title>
B
</title>
<text text-anchor="middle" x="136.2373" y="-48.8" font-family="Times,serif" font-size="14.00" fill="#000000">B</text> </g> <!-- A×C&#45;&gt;B --> <g id="edge1" class="edge">
<title>
A×C-&gt;B
</title>
<path fill="none" stroke="#000000" d="M57.0918,-80.5676C69.9522,-76.0881 85.5179,-70.6663 99.4306,-65.8203"/> <polygon fill="#000000" stroke="#000000" points="109.2067,-62.4152 101.2434,-69.9542 104.4849,-64.0599 99.7632,-65.7046 99.7632,-65.7046 99.7632,-65.7046 104.4849,-64.0599 98.2829,-61.455 109.2067,-62.4152 109.2067,-62.4152"/> <text text-anchor="middle" x="84.6304" y="-74.8" font-family="Times,serif" font-size="14.00" fill="#000000">g</text> </g> <!-- A×B^A --> <g id="node3" class="node">
<title>
A×B^A
</title>
<text text-anchor="middle" x="30.0117" y="-13.8" font-family="Times,serif" font-size="14.00" fill="#000000">A×B^A</text> </g> <!-- A×C&#45;&gt;A×B^A --> <g id="edge2" class="edge">
<title>
A×C-&gt;A×B^A
</title>
<path fill="none" stroke="#000000" d="M30.0117,-71.5867C30.0117,-63.9407 30.0117,-54.8916 30.0117,-46.4274"/> <polygon fill="#000000" stroke="#000000" points="30.0117,-36.1686 34.5118,-46.1686 30.0118,-41.1686 30.0118,-46.1686 30.0118,-46.1686 30.0118,-46.1686 30.0118,-41.1686 25.5118,-46.1687 30.0117,-36.1686 30.0117,-36.1686"/> <text text-anchor="middle" x="20.0117" y="-49.8" font-family="Times,serif" font-size="14.00" fill="#000000">1×h</text> </g> <!-- A×B^A&#45;&gt;B --> <g id="edge3" class="edge">
<title>
A×B^A-&gt;B
</title>
<path fill="none" stroke="#000000" d="M60.1676,-27.936C72.2674,-31.9227 86.3356,-36.558 99.0592,-40.7503"/> <polygon fill="#000000" stroke="#000000" points="108.9118,-43.9966 98.0058,-45.1411 104.1629,-42.4319 99.414,-40.8671 99.414,-40.8671 99.414,-40.8671 104.1629,-42.4319 100.8223,-36.5931 108.9118,-43.9966 108.9118,-43.9966"/> <text text-anchor="middle" x="84.6304" y="-40.8" font-family="Times,serif" font-size="14.00" fill="#000000">ev</text> </g> </g>
</svg>
</center>
<p>を可換にするような射 <span class="math inline">\(h : C \to B^A\)</span> は少なくとも一つは存在する.</p>
<h4 id="証明唯一性">証明・唯一性</h4>
<p>与えられた <span class="math inline">\(g\)</span> に対してこのような <span class="math inline">\(h\)</span> は唯一しか存在しない. これを示す常套的手段として次のような方法を取る. 今 <span class="math inline">\(h\)</span> の他に <span class="math inline">\(h&#39;\)</span> があるとき, 実は <span class="math inline">\(h=h&#39;\)</span> であることを示す. これによって, 2つ以上存在することが言えなくなる. 先ほどの存在性と合わせることで, 唯一の存在であることが言えたことになる.</p>
<p><span class="math inline">\(h&#39;\)</span> もまた上の図式を可換にするような射であるとする. <span class="math display">\[\forall c \in C, h(c) = h&#39;(c)\]</span> を示すことで <span class="math inline">\(h=h&#39;\)</span> を言うことにする.</p>
<p>自由に取ってきた <span class="math inline">\(c \in C\)</span> について, <span class="math inline">\(h(c) = h&#39;(c)\)</span> を言う. 注意として <span class="math inline">\(h(c) \in B^A\)</span> であるので, この値の等価性を示すには <span class="math inline">\(h(c)=(f,Ef)\)</span> とすると <span class="math inline">\(f\)</span> の関数としての等価性と <span class="math inline">\(Ef\)</span> の集合としての等価性を合わせて言う必要がある.</p>
<ol type="i">
<li><p>2つは射であるので <span class="math display">\[E(hc)=Ec=E(h&#39;c)\]</span></p></li>
<li><p><span class="math inline">\(h(c)=h&#39;(c)\)</span> を示す. 2つは <span class="math inline">\(A \to B\)</span> な関数なので, 好きに取ってきた <span class="math inline">\(a \in A\)</span> について <span class="math inline">\(h(c)(a) = h&#39;(c)(a)\)</span> を示せばよい.</p></li>
</ol>
<p>今もし <span class="math inline">\(Ea=Ec \iff (a,c) \in A \times C\)</span> ならば, 可換性より即座に <span class="math inline">\(h(c)(a) = ev(a,hc)=g(a,c)=\cdots=h&#39;(c)(a)\)</span> が言える.</p>
<p>さて <span class="math inline">\(E(h(c)(a))=E(f_c(a))=Ef_c\cap Ea=Ec \cap Ea\)</span> であるので <span class="math inline">\(h(c)(a) = h(c)(a) \rceil Ec \cap Ea ( \in B)\)</span> であるが, <span class="math display">\[\begin{align*}
h(c)(a) \rceil Ec \cap Ea
&amp; = h(c) (a \rceil Ec) \rceil Ea  &amp; \cdots h c \in B^A \text{ なので} \\
&amp; = (hc \rceil Ea) (a \rceil Ec)  &amp; \cdots h c \in B^A \text{ なので} \\
&amp; = (h(c \rceil Ea)) (a \rceil Ec)  &amp; \cdots h \text{ が射なので} \\
\end{align*}\]</span> であるので結局 <span class="math inline">\((a&#39;,c&#39;)=(a \rceil Ec, c \rceil Ea)\)</span> を <span class="math inline">\(h\)</span> に適用した場合を考えればよくて, このとき <span class="math inline">\(Ea&#39;=Ec&#39;\)</span> であるので先ほどの議論から <span class="math inline">\(h\)</span> の値と <span class="math inline">\(h&#39;\)</span> の値は等しい.</p>
<p>以上から <span class="math inline">\(h=h&#39;\)</span>.</p>
<h3 id="メモ">メモ</h3>
<p>層 <span class="math inline">\(A\)</span> から <span class="math inline">\(B\)</span> への射全体を圏論的に <span class="math inline">\(Hom(A,B)\)</span> と書いてやると, 今の定理はつまり <span class="math display">\[Hom(A \times C, B) \simeq Hom(C, B^A)\]</span> であることを主張していた.</p>
<p>この <span class="math inline">\(A\)</span> の部分を隠してやると, 適当な <span class="math inline">\(F,G\)</span> を用いて <span class="math display">\[Hom(F(C), B) \simeq Hom(C, G(B))\]</span> と書き直せる. これを随伴 <a href="https://ja.wikipedia.org/wiki/%E9%9A%8F%E4%BC%B4%E9%96%A2%E6%89%8B">wikipedia</a> という. <span class="math inline">\(F,G\)</span> を随伴関手という.</p>
<h3 id="メモ-1">メモ</h3>
<p>今の定理はカリーハワード対応を書いてやると</p>
<ul>
<li>論理
<ul>
<li><span class="math inline">\(\left( (A \land C) \implies B \right) \iff \left( C \implies A \implies B \right)\)</span></li>
</ul></li>
<li>プログラム (Haskell)
<ul>
<li><code>(a, c) -&gt; b</code> <span class="math inline">\(\iff\)</span> <code>c -&gt; a -&gt; b</code></li>
<li>左から右をカリー化という</li>
</ul></li>
</ul>
<!--

  HTML として pandoc -B で include する.

  <H2> を列挙してそれらにリンクを貼った toc を id='toc' に埋め込む.
  markdown で書いてるだろうから例として次のような段落を書けばよい.

```
## INDEX
<div id=toc></div>
```

  used in
  - /memo/gnuplot
  - /memo/linux
  - /memo/imagemagick

-->
<script>
(function() {
  var sections = document.getElementsByTagName('h2');
  var i;
  var OL = document.createElement('ol');
  for (i=0; i < sections.length; ++i) {
    var LI = document.createElement('li');
    var A = document.createElement('a');
    A.innerHTML = sections[i].innerHTML;
    if (A.innerHTML.toUpperCase() == 'INDEX') continue;
    A.href = '#' + i;
    LI.appendChild(A);
    OL.appendChild(LI);

    var PREF = document.createElement('a');
    PREF.name = i;
    sections[i].appendChild(PREF);
  }

  var done = false;
  function work() {
    if (done) return;
    if ( document.getElementById('toc') === null) return; // no toc element
    document.getElementById('toc').appendChild(OL);
    done = true;
  };

  window.onload = work;
  setTimeout(work,800);
}());
</script>
</body>
</html>
