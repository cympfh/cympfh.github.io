% Mon Dec 18 2017

## 18日目; まんがタイムきらら Advent Calendar 2017

### 概要
これは
[まんがタイムきらら Advent Calendar 2017](https://adventar.org/calendars/2185)
の18日目のための記事です.

<style>
img.i {
    width: 200px; height: 200px;
    border: 5px black solid;
}
img.selected {
    border: 5px red solid;
}
</style>
<script>
var data = [
{
    "label": "1703.png",
    "url": "https://i.imgur.com/KGE727l.png"
}, { "label": "1704.png",
    "url": "https://i.imgur.com/v8aswRT.png"
}, {
    "label": "1706.png",
    "url": "https://i.imgur.com/hREN3Ry.png"
}, {
    "label": "1707.png",
    "url": "https://i.imgur.com/xVSQ3U6.png"
}, {
    "label": "1708.png",
    "url": "https://i.imgur.com/1DyKht0.png"
}, {
    "label": "1709.png",
    "url": "https://i.imgur.com/FVXxNiQ.png"
}, {
    "label": "1710.png",
    "url": "https://i.imgur.com/wfYrc0y.png"
}, {
    "label": "1711.png",
    "url": "https://i.imgur.com/cDmfwMu.png"
}, {
    "label": "1712.png",
    "url": "https://i.imgur.com/9uNI0OL.png"
}];

function iota(n) {
    var ret = [];
    for (var i = 0; i < n; ++i) ret[i] = i;
    return ret;
}

function shuffle(xs) {
    var n = xs.length;
    for (var i = 0; i < n; ++i) {
        var j = Math.random() * n | 0;
        var tmp = xs[j];
        xs[j] = xs[i];
        xs[i] = tmp;
    }
    return xs;
}

var arr = shuffle(iota(9));
var selected = -1;

function click_event(i) {
    var f = function(event) {
        var img = document.getElementById('i' + i);
        if (selected == -1) {
            img.className = 'i selected';
            selected = i;
        } else {

            var tmp = arr[selected];
            arr[selected] = arr[i];
            arr[i] = tmp;
            console.log(tmp);

            var img_ = document.getElementById('i' + selected);
            img_.className = 'i';
            selected = -1;
        }
        display();
    };
    return f;
}

function display() {
    var n = arr.length;
    var cx = 0;
    for (var i = 0; i < n; ++i) {
        var j = arr[i];
        var img = document.getElementById('i' + i);
        img.src = data[j].url;
        if (i == j) ++cx;
    }

    var msg = "";
    if (cx < n) {
        msg = `${cx} Hit`;
    } else {
        msg = "Congrats!!"
    }
    document.getElementById('ans').innerHTML = msg;
}

</script>

<h3>ルール</h3>
まんがタイムきららキャラットの右上には<br>
<img width='400px' src='https://i.imgur.com/52MGm1F.jpg'><br>
こんなコメントが毎号ある<br>
季節に合わせたコメントだったり別に関係なかったり<br>
<br>
これで絵合わせ<br>
<br>
2017年に出版された12冊を使いたいところだったがいくつか欠けてた<br>
<br>
9冊でやる

<h3>操作</h3>
画像を2つクリックして交換<br>
<br>
上にある赤い色の数字は、9つの内いくつ正しいか

<hr width='400px'>
<div style='padding: 0 30%;'>
<div id="ans" style="width: 640px;text-align:center;font-weight:bold; font-size: 1.1rem; margin: 0.1rem; color:#f00;"></div>
<table style='width: 640px'>
<tr>
<th>3月号</th>
<th>4月号</th>
<th>6月号</th>
</tr>
<tr>
<td><img class="i" id="i0"></td>
<td><img class="i" id="i1"></td>
<td><img class="i" id="i2"></td>
</tr>
<tr>
<th>7月号</th>
<th>8月号</th>
<th>9月号</th>
</tr>
<tr>
<td><img class="i" id="i3"></td>
<td><img class="i" id="i4"></td>
<td><img class="i" id="i5"></td>
</tr>
<tr>
<th>10月号</th>
<th>11月号</th>
<th>12月号</th>
</tr>
<tr>
<td><img class="i" id="i6"></td>
<td><img class="i" id="i7"></td>
<td><img class="i" id="i8"></td>
</tr>
</table>
</div>

<script>
display();
for (var i = 0; i < arr.length; ++i) {
    var img = document.getElementById('i' + i);
    img.addEventListener('click', click_event(i));
}
</script>
