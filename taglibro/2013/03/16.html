<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Sat Mar 16 11:27:39 JST 2013</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../../../resources/css/c.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<a href="../../">ğŸ”™ Back to Top</a>
<header>
<h1 class="title">Sat Mar 16 11:27:39 JST 2013</h1>
</header>
<h2 id="å¹¸ã›ã«ãªã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„-vimrc">å¹¸ã›ã«ãªã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ vimrc</h2>
<pre class="vim"><code>; :vim set wildmode=longest,list,full:</code></pre>
<h2 id="æ—¥è¨˜">æ—¥è¨˜</h2>
<p>è³‡æœ¬ä¸»ç¾©ã®ç†å¿µãŒåŸå› ã§ã€å®¶ã®ãƒãƒƒãƒˆãŒä½¿ãˆãªããªã£ãŸ<br />
å¿ƒã®ä¸­ã§æ€ã‚ãšã‚„ã£ãŸãã¨å–œã‚“ã ï¼ã“ã‚Œã§è‡ªåˆ†ã®æ™‚é–“ãŒ<br />
ã§ãã‚‹ãï¼æ¯æœˆ4000å††æ‰•ã†æ¨©åˆ©ã‚’æ”¾æ£„ã—ã¦ã€è‡ªç”±ã‚’å¾—ãŸï¼</p>
<p>ã ã£ã¦ã ã£ã¦ã ã£ã¦</p>
<p>ä»¥ä¸‹ã€é£Ÿå ‚ã§èã„ãŸä¼šè©±ï¼</p>
<p>ä»Šä¸å®‰ã«ãªã£ã¦U-taskè¦‹ã¦ããŸã‘ã©ç„¡äº‹é€²ç´šã—ã¦ãŸ<br />
ãªã‚Šã•ã‚“ãŠã¯ã‚ˆã†ã”ã–ã„ã¾ã™<br />
ã‚‚ã†1ä»¶ã„ã£ãŸã‚‰é…åˆ»ã˜ã‚ƒã­ãƒ¼ã‹ã‚¯ã‚½<br />
ç—…é™¢ã«æ˜¥ã£ã¦æ„Ÿã˜ã®ãƒ•ãƒªãƒ«ãªæœç€ã¦ããŸã‚‰ã‚ã£ã¡ã‚ƒè¦‹ã‚‰ã‚ŒãŸã€‚<br />
ã‚¯ã‚½ã‚²ãƒ¼ã ã‹ã‚‰ã§ã™<br />
ã¨ã‚Šã‚ãˆãš5æœˆã¾ã§ã¯å¿™ã—ã„<br />
ã‚‚ã†ã¡ã‚‡ã„ã“ã£ã¡ã„ã¦è·ç‰©ã®ç‰‡ä»˜ã‘è¿½ã„è¾¼ã‚“ã§ã‚‚è‰¯ã„ã‚“ã ã‘ã©ã€ã ã†ã™ã‚‹ã¨æœ¬å½“ã«å±•è¦§ä¼šå‘¨ã‚Šåˆ‡ã‚Œãªããªã‚‹<br />
ã‚„ã£ã±ã‚Šé—˜ã£ã¦ã‚‹ä¼æ¥­äººã¯é¡”ãŒé•ã†ãªï¼Œãã‚Œã«æ¯”ã¹ä¿ºã¯å‡§ã®åˆ‡ã‚ŒãŸ ç³¸ã¿ãŸã„ãªæ„Ÿã˜ã ã‚<br />
å§‰ãã‚Œ<br />
ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚<br />
æŠ¼ä¸Šè¡Œå¤šã„ãª<br />
ã·ã‚ˆã·ã‚ˆÃ—ãŠã«ã‚ƒã®ã“ã¨ã‹ã†ã‚ã</p>
<h1 id="sat-mar-16-130915-jst-2013">Sat Mar 16 13:09:15 JST 2013</h1>
<h2 id="fay-ã§éŠã¶">fay ã§éŠã¶</h2>
<p>ã‚„ã£ã¨fayã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸï¼ <code>fay :: Haskell -&gt; JavaScript</code></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">cabal</span> install fay</code></pre></div>
<p>ã£ã¦ã™ã‚‹ã¨</p>
<pre><code>test-framework-th-0.2.4 depends on haskell-src-exts-1.13.5 which failed to install</code></pre>
<p>ã¨ã‹è¨€ã‚ã‚Œã¦ã€ã™ãä¸Šã®è¡Œã« happy 1.7ä»¥ä¸ŠãŒå¿…è¦ã¨ã‹æ›¸ã„ã¦ã¦ã€ã§ã‚‚happy ã¯ã‚ã£ã¦ã€ã™ãã‚°ã‚°ã£ã¦PATHã«~/.cabal/bin/ã¯è¿½åŠ ã—ã¦ï¼ãã‚Œã§ã‚‚ãƒ€ãƒ¡ã§ï¼ ã—ã‚‡ã†ãŒãƒŠã‚·ã«</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># ln ~/.cabal/bin/happy /bin/</span></code></pre></div>
<p>ã¨ã‹ã‚„ã£ã¦ã€ã¨ã‚‚ã‹ãfayå…¥ã‚Œã‚ŒãŸï¼ fayã®ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯ã€fayãŒå…¨ç„¶é–‹ç™ºæ®µéšãªã®ã§ã€githubã«ç½®ã„ã¦ã‚ã‚‹ ã®ã‚’è¦‹ãŸã»ã†ãŒã‚ˆãã¦</p>
<p>https://github.com/faylang/fay/tree/master/examples</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">fay</span> --version
<span class="ex">fay</span> 0.14.2.0</code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="fu">cat</span> test.hs
<span class="ex">module</span> Alert where

<span class="ex">import</span> FFI
<span class="ex">import</span> Prelude

<span class="ex">main</span> :: Fay ()
<span class="ex">main</span> = alert $ <span class="st">&quot;Hello, World!&quot;</span>

<span class="ex">alert</span> :: String -<span class="op">&gt;</span> Fay ()
<span class="ex">alert</span> = ffi <span class="st">&quot;console.log(%1)&quot;</span>

$ <span class="ex">fay</span> -O -o test.js test.hs<span class="kw">;</span> <span class="ex">node</span> test.js
<span class="ex">Hello</span>, World!</code></pre></div>
<p>print ã¨ã„ã†é–¢æ•°ã¯ç„¡ã„ã¿ãŸã„ï¼show ã¯ã‚ã£ã¦</p>
<p>å…ˆã®è©²å½“ç®‡æ‰€ã‚’</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> alert <span class="fu">$</span> show <span class="fu">$</span> <span class="st">&quot;Hello, World!&quot;</span></code></pre></div>
<p>ã¨ã ã‘ã—ã¦ã€</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">fay</span> -O -o test.js test.hs<span class="kw">;</span> <span class="ex">node</span> test.js
{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;H&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;e&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;l&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;l&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;o&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot;,&quot;</span>,<span class="st">&quot;cdr&quot;</span>:{<span class="st">&quot;car&quot;</span>:<span class="st">&quot; &quot;</span>,<span class="st">&quot;cdr&quot;</span>:<span class="dt">{&quot;car&quot;:&quot;W&quot;,&quot;cdr&quot;:{&quot;car&quot;:&quot;o&quot;,&quot;cdr&quot;:{&quot;car&quot;:&quot;r&quot;,&quot;cdr&quot;:{&quot;car&quot;:&quot;l&quot;,&quot;cdr&quot;:{&quot;car&quot;:&quot;d&quot;,&quot;cdr&quot;:{&quot;car&quot;:&quot;!&quot;,&quot;cdr&quot;:null}}}}}}}}}}}}}</span></code></pre></div>
<p>ã¡ã‚ƒã‚“ã¨StringãŒ[Char]ã«ãªã£ã¦ã‚‹ï¼ã—ã‹ã‚‚ãŸã¶ã‚“ã€showã¯ãŸã ã®#toString ã˜ã‚ƒãªãã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«ã‚’åˆ—æŒ™ã•ã›ã¦ã‚‹ï¼çµ„ã¿è¾¼ã¿ã®#toStringã¯ ä½¿ã„ç‰©ã«ãªã‚‰ãªã„ã‹ã‚‰ã­ï¼</p>
<p>å‹æ¤œæŸ»ã®ç‚ºã ã‘ã«ã€ã¾ãŸãã®æ™‚ã ã‘ã«ã€ghcã‚’ä½¿ã†ãã†ã§ã™ã€fayã¯ï¼<br />
ã‚ã‚ã€ã‚ã¨ã€console.logã®å‹ã‚’<code>String-&gt;Fay ()</code>ã¨ã—ã¦ã‚‹ã‘ã©ã€<code>a-&gt;Fay ()</code>ã¨ ã—ã¦ã—ã¾ã£ã¦è‰¯ã„ã£ã¦ã€æ€ã£ãŸã‚“ã ã‘ã©ã€ãªã‚“ã‹ä¸å¯æ€è­°ãªã“ã¨ã«ãªã‚‹ã®ã§ã‚„ã‚ã¾ã™ï¼</p>
<p>ã¯ã£ãã‚Šè¨€ã£ã¦ä½¿ã„ç‰©ã«ãªã‚‰ãªã„ï¼ãã®ã¾ã¾é€šã›ã°å‹æ¤œæŸ»é€šã£ã¦ æ¬²ã—ã„ã‚ˆã†ãªã‚‚ã®ã‚‚é€šã‚‰ãªã„ã—ï¼ã„ã‚„ã€ã¾ã‚ã€ç§ãŒä½¿ã„ã“ãªã›ã¦ãªã„ ã ã‘ã ã‚ã†ã‘ã©ï¼fayã¯Haskellã˜ã‚ƒãªãã¦Haskellã®ã‚ˆã†ãªã‚‚ã®ã‚’ æ‰±ã†ã‚‚ã®ã‚‰ã—ã„ï¼</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Alert</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">FFI</span>
<span class="kw">import </span><span class="dt">Prelude</span>

<span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> alert <span class="fu">$</span> show <span class="fu">$</span> a
    <span class="kw">where</span>
<span class="ot">    a ::</span> [<span class="dt">Int</span>]
    a <span class="fu">=</span>  map (\x <span class="ot">-&gt;</span> x<span class="fu">*</span>x) [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]

<span class="ot">alert ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Fay</span> ()
alert <span class="fu">=</span> ffi <span class="st">&quot;console.log(%1)&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">fay</span> -O -o test.js test.hs<span class="kw">;</span> <span class="ex">node</span> test.js
<span class="dt">{&quot;car&quot;:{&quot;forced&quot;:false},&quot;cdr&quot;:{&quot;forced&quot;:false}}</span></code></pre></div>
<p>ã‚ãƒ¼ã€é…å»¶ã•ã‚Œã¦ã‚‹ã®ã‹ï¼ å‡ºåŠ›ã®å‰ã«ä¸­èº«ã‚’è©•ä¾¡ã•ã›ã‚Œã°ã„ã„ã‚“ã ã‚ã†ï¼</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Alert</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">FFI</span>
<span class="kw">import </span><span class="dt">Prelude</span>

<span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> alert <span class="fu">$</span> show_list <span class="fu">$</span> a
    <span class="kw">where</span>
<span class="ot">        a ::</span> [<span class="dt">Int</span>]
        a <span class="fu">=</span>  map (\x <span class="ot">-&gt;</span> x<span class="fu">*</span>x) [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]

<span class="ot">alert ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Fay</span> ()
alert <span class="fu">=</span> ffi <span class="st">&quot;console.log(%1)&quot;</span>

<span class="ot">show_list ::</span> [a] <span class="ot">-&gt;</span> <span class="dt">String</span>
show_list ls <span class="fu">=</span> <span class="st">&quot;[&quot;</span> <span class="fu">++</span> show_list&#39; ls <span class="fu">++</span> <span class="st">&quot;]&quot;</span>
show_list&#39; ls <span class="fu">=</span>
    <span class="kw">case</span> ls <span class="kw">of</span>
      [] <span class="ot">-&gt;</span> <span class="st">&quot;&quot;</span>
      x<span class="fu">:</span>xs <span class="ot">-&gt;</span> (show x) <span class="fu">++</span> <span class="st">&quot;, &quot;</span> <span class="fu">++</span> (show_list&#39; xs)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">fay</span> -O -o test.js test.hs
<span class="ex">node</span> test.js
[<span class="ex">1</span>, 4, 9, ]</code></pre></div>
<p>ã¾ã‚ã€ã“ã‚“ãªã‚‚ã‚“ã§ï¼</p>
<hr />
<p>case of ä½¿ã£ã¦ã‚‹ã‘ã©ã€å¼•æ•°ã§ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒã¯ã§ããªã‹ã£ãŸï¼</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Alert</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">FFI</span>
<span class="kw">import </span><span class="dt">Prelude</span>

<span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> alert <span class="fu">$</span> show <span class="fu">$</span> fact <span class="dv">10</span>
    <span class="kw">where</span>

<span class="ot">    fact ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Int</span>
    fact <span class="dv">0</span> <span class="fu">=</span> <span class="dv">1</span>
    fact n <span class="fu">=</span> n <span class="fu">*</span> (fact (n<span class="fu">-</span><span class="dv">1</span>))

<span class="ot">alert ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Fay</span> ()
alert <span class="fu">=</span> ffi <span class="st">&quot;console.log(%1)&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">fay</span> -O -o test.js test.hs
<span class="ex">node</span> test.js
<span class="ex">3628800</span></code></pre></div>
<p>ãªã‚“ã‹ã€å‡ºæ¥ã‚‹ã‚ˆã†ã«ãªã£ã¦ã—ã¾ã£ãŸï¼ã„ã¿ãµï¼</p>
<p>ã•ã£ããªã‚“ã‹ ambiguous type ã‚’é€£å‘¼ã—ã¦ãŸãã›ã«ï¼ã‚ã‘ã‚ã‹ã‚‰ã‚“</p>
<hr />
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">module</span> <span class="dt">Alert</span> <span class="kw">where</span>

<span class="kw">import </span><span class="dt">FFI</span>
<span class="kw">import </span><span class="dt">Prelude</span>

<span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> alert <span class="fu">$</span> show <span class="fu">$</span> fact <span class="dv">10</span>
    <span class="kw">where</span>

    fact <span class="dv">0</span> <span class="fu">=</span> <span class="dv">1</span>
    fact n <span class="fu">=</span> n <span class="fu">*</span> fact (n<span class="fu">-</span><span class="dv">1</span>)

<span class="ot">alert ::</span> <span class="dt">String</span> <span class="ot">-&gt;</span> <span class="dt">Fay</span> ()
alert <span class="fu">=</span> ffi <span class="st">&quot;console.log(%1)&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">fay</span> -O -o test.js test.hs
<span class="ex">fay</span>:
<span class="ex">test.hs</span>:7:23:
    <span class="ex">Ambiguous</span> type variable <span class="kw">`</span><span class="ex">a0</span><span class="st">&#39; in the constraints:</span>
<span class="st">      (Eq (Automatic a0)) arising from a use of `fact&#39;</span> at test.hs:7:23-26
      <span class="kw">(</span><span class="ex">base</span>:GHC.Num.Num (Automatic a0<span class="kw">)</span>)
        <span class="ex">arising</span> from the literal <span class="kw">`</span>10<span class="st">&#39; at test.hs:7:28-29</span>
<span class="st">      (Prelude.Num (Automatic a0))</span>
<span class="st">        arising from a use of `fact&#39;</span> at test.hs:7:23-26
    <span class="ex">Probable</span> fix: add a type signature that fixes these type variable(s)
    <span class="ex">In</span> the second argument of <span class="kw">`(</span>$<span class="kw">)</span><span class="st">&#39;, namely `fact 10&#39;</span>
    <span class="ex">In</span> the second argument of <span class="kw">`</span>($)<span class="st">&#39;, namely `show $ fact 10&#39;</span>
    <span class="ex">In</span> the expression: alert $ show $ fact 10

<span class="ex">make</span>: *** [test] Error 1</code></pre></div>
<p>ã§ããŸï¼ã§ããªã„ä¾‹ãŒï¼ factã®å‹ã‚’æ˜è¨˜ã—ã¦ã‚„ã‚‹ã¨å‹•ãï¼ãªã‚“ã§å‹æ¤œæŸ»é€šã‚‰ãªã„ã®ã‹ãª</p>
<h1 id="sat-mar-16-135018-jst-2013">Sat Mar 16 13:50:18 JST 2013</h1>
<h2 id="fay-ã§éŠã¶ã®ç¶šã">fay ã§éŠã¶ã®ç¶šã</h2>
<p>ã‚‚ã†ã¡ã‚‡ã£ã¨ã€Fayã§éŠã¶ï¼ ã“ã£ã¡ã‹ã‚‰æ­©ã¿å¯„ã‚‹å§¿å‹¢ãŒå¤§åˆ‡ï¼</p>
<p>ã¾ãšå…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ­£åº§ã—ã¦æœ—èª­ã™ã‚‹ï¼ <a href="https://github.com/faylang/fay/wiki">Home Â· faylang/fay Wiki</a></p>
<blockquote>
<p>A proper subset of Haskell that compiles to JavaScript.</p>
</blockquote>
<p>ã¯ã„ï¼subsetãªã®ã§ã™ã­ï¼æ°—ã‚’ã¤ã‘ã¾ã™ï¼</p>
<p>å‰å›ã€printãŒç„¡ã„ã¨ã‹è¨€ã£ãŸã‘ã©ã€putStrLnãªã‚‰ã‚ã£ãŸï¼ console.logã§ã‚ã‚‹ã¨ä¸­ã§å®šç¾©ã•ã‚Œã¦ã‚‹ï¼showé–¢æ•°ã¯JSONã¸ã®å¤‰æ›ç¨‹åº¦ï¼ ãƒªã‚¹ãƒˆãªã‚“ã‹ã‚’ç¶ºéº—ã«è¡¨ç¤ºã™ã‚‹ã®ã¯è‡ªåˆ†ã®æ‰‹ã§ã‚„ã‚‹ã®ã‹ãªï¼</p>
<p>ãªã«ã‚’ã©ã†å¤‰æ›ã—ã¦ã‹ã‚‰å‹æ¤œæŸ»ã«æ›ã‘ã¦ã‚‹ã®ã‹ã‚ã‹ã‚‰ã‚“ï¼</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">import </span><span class="dt">FFI</span>
<span class="kw">import </span><span class="dt">Prelude</span>

<span class="ot">main ::</span> <span class="dt">Fay</span> ()
main <span class="fu">=</span> putStrLn <span class="fu">$</span> list_show <span class="fu">$</span> [ i <span class="fu">|</span> i <span class="ot">&lt;-</span> [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>]]

<span class="ot">list_show ::</span> [<span class="dt">Int</span>] <span class="ot">-&gt;</span> [<span class="dt">Int</span>]
list_show ls <span class="fu">=</span> <span class="st">&quot;[&quot;</span> <span class="fu">++</span> list_show&#39; ls <span class="fu">++</span> <span class="st">&quot;]&quot;</span>
list_show&#39; [] <span class="fu">=</span> <span class="st">&quot;&quot;</span>
list_show&#39; (x<span class="fu">:</span>[]) <span class="fu">=</span> show x
list_show&#39; (x<span class="fu">:</span>xs) <span class="fu">=</span> show x <span class="fu">++</span> <span class="st">&quot;, &quot;</span> <span class="fu">++</span> list_show&#39; xs</code></pre></div>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="ex">fay</span> -O -o test.js test.hs
<span class="ex">fay</span>:
<span class="ex">test.hs</span>:5:19:
    <span class="ex">Couldn</span><span class="st">&#39;t match expected type `Char&#39;</span> with actual type <span class="kw">`</span><span class="ex">Int</span><span class="st">&#39;</span>
<span class="st">    Expected type: [Int] -&gt; fay-base-0.14.2.0:Prelude.String</span>
<span class="st">        Actual type: [Int] -&gt; [Int]</span>
<span class="st">    In the first argument of `($)&#39;</span>, namely <span class="kw">`</span>list_show<span class="st">&#39;</span>
<span class="st">    In the second argument of `($)&#39;</span>, namely
        <span class="kw">`</span><span class="ex">list_show</span> $ [i <span class="kw">|</span> <span class="ex">i</span> <span class="op">&lt;</span>- [1, 2, 3]]<span class="st">&#39;</span>

<span class="st">test.hs:8:16:</span>
<span class="st">    Couldn&#39;</span>t match expected type <span class="kw">`</span><span class="ex">Int</span><span class="st">&#39; with actual type `Char&#39;</span>
    <span class="ex">Expected</span> type: [Int]
        <span class="ex">Actual</span> type: [Char]
    <span class="ex">In</span> the first argument of <span class="kw">`(</span><span class="ex">++</span><span class="kw">)</span><span class="st">&#39;, namely `&quot;[&quot;&#39;</span>
    <span class="ex">In</span> the expression: <span class="st">&quot;[&quot;</span> ++ list_show<span class="st">&#39; ls ++ &quot;]&quot;</span>

<span class="st">make: *** [test] Error 1</span></code></pre></div>
<h1 id="sat-mar-16-194442-jst-2013">Sat Mar 16 19:44:42 JST 2013</h1>
<h2 id="æ—¥è¨˜-1">æ—¥è¨˜</h2>
<p>ã‚ã‚ã€ã‚‚ã†ã„ã„ã§ã™ï¼ã‚‚ã†æº€è¶³ã—ã¾ã—ãŸ</p>
<h2 id="éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶">éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶</h2>
<p><a href="http://d.hatena.ne.jp/podhmo/20101217/1292565023">éƒ¨åˆ†ç¶™ç¶šä¾¿åˆ©ã ãªãƒ¼ã€‚ - podhmoã®æ—¥è¨˜</a></p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">gosh&gt; (<span class="kw">define</span><span class="fu"> k </span><span class="dv">#f</span>)
k
gosh&gt; (reset (<span class="kw">for-each</span> (^x (shift cc (set! k cc) x)) (<span class="kw">list</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>)))
<span class="dv">1</span>
gosh&gt; (k)
<span class="dv">2</span>
gosh&gt; (k)
<span class="dv">3</span>
gosh&gt; (k)
#&lt;undef&gt;</code></pre></div>
<p>ãˆãˆã£ã¨ã€reset-shiftã§ä½œã£ãŸç¶™ç¶šã¯å¼•æ•°ã‚’å–ã‚‰ãªã„ã®ã­ï¼ã¾ãšãã“ã‹ã‚‰ åˆã‚ã¦çŸ¥ã£ãŸï¼ã§ã€ã“ã‚Œã®æœ‰ç”¨æ€§ã¯ã€æ—¢ã«ãã“ã«ã‚ã‚‹ãƒ«ãƒ¼ãƒ—ã‚’ä¸­æ–­ã€å†é–‹ ã•ã›ã‚‹ã“ã¨ï¼å†å¸°ãªã‚“ã‹ã§ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ã€ä¸­èº«ãŒä½¿ã£ã¦ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ ãªã‚“ã‹ã‚’å…¨éƒ¨ã€å†å¸°ã®å¼•æ•°ã«ã—ã¦ã€ä¸­æ–­ãƒ»å†é–‹ã«ã¯ãã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ä¿å­˜ ã—ã¦ãŠãã®ã ã‚ã†ï¼ãã‚Œã‚‰ã‚’ãƒ‘ãƒƒã¨å®Ÿç¾ã§ãã‚‹ã®ã§ã€ç¶™ç¶šã¯æœ‰ç”¨ã§ã‚ã‚‹ï¼ ã¨ã„ã†ã“ã¨ã‹ãªï¼</p>
<h2 id="éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶2">éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶2</h2>
<p><a href="http://outer-inside.blogspot.jp/2011/03/blog-post.html">éƒ¨åˆ†ç¶™ç¶šãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</a></p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">gosh&gt; (<span class="kw">cons</span> <span class="dv">0</span> (reset (<span class="kw">cons</span> <span class="dv">1</span> (shift k (<span class="kw">cons</span> <span class="dv">2</span> &#39;null )))))
(<span class="dv">0</span> <span class="dv">2</span> . null)
gosh&gt; k
#&lt;closure (call/pc <span class="dv">#f</span> <span class="dv">#f</span>)<span class="kw">&gt;</span>
gosh&gt; (<span class="kw">cons</span> <span class="dv">0</span> (reset (<span class="kw">cons</span> <span class="dv">1</span> (shift cc (set! k cc) (<span class="kw">cons</span> <span class="dv">2</span> &#39;null )))))
(<span class="dv">0</span> <span class="dv">2</span> . null)
gosh&gt; k
#&lt;closure (call/pc <span class="dv">#f</span> <span class="dv">#f</span>)<span class="kw">&gt;</span>
gosh&gt; (k <span class="dv">3</span>)
(<span class="dv">1</span> . <span class="dv">3</span>)
gosh&gt; (k)
(<span class="dv">1</span> . #&lt;undef&gt;)</code></pre></div>
<p>å¼•æ•°ã¨ã‚‹ã˜ã‚ƒã‚“ï¼å–ã‚‰ãªãã¦ã‚‚ä½•ã‹ã«ã¯ãªã‚‹ã®ã­</p>
<div class="sourceCode"><pre class="sourceCode scheme"><code class="sourceCode scheme">gosh&gt; (d k)
#&lt;closure (call/pc <span class="dv">#f</span> <span class="dv">#f</span>)<span class="kw">&gt;</span> is an instance of class &lt;procedure&gt;
slots:
  required  : <span class="dv">0</span>
  optional  : <span class="dv">#t</span>
  optcount  : <span class="dv">1</span>
  locked    : <span class="dv">#f</span>
  currying  : <span class="dv">#f</span>
  constant  : <span class="dv">#f</span>
  info      : (call/pc <span class="dv">#f</span> <span class="dv">#f</span>)
  setter    : <span class="dv">#f</span></code></pre></div>
<p>ã†ã‚“ã€ã¾ã‚ã€ã‚ã‹ã‚‰ã‚“ï¼</p>
<h2 id="éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶3">éƒ¨åˆ†ç¶™ç¶šã‚’å­¦ã¶3</h2>
<p><a href="http://practical-scheme.net/gauche/man/gauche-refj_94.html">Gauche ãƒ¦ãƒ¼ã‚¶ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: 9.20 gauche.partcont - éƒ¨åˆ†ç¶™ç¶š</a></p>
<p>åˆã‚ã‹ã‚‰ã‚³ã‚³èª­ã‚€ã‚“ã ã£ãŸï¼ åˆ†ã‹ã£ãŸæ°—ã«ã¯ãªã£ãŸï¼ ãã—ã¦ã€ãƒ«ãƒ¼ãƒ—ã®å¤–å´ã¨å†…å´ã‚’reset-shiftã§æŒŸã‚€ã“ã¨ã§ã€ãƒ«ãƒ¼ãƒ—ã‚’ä¸€å‘¨ã ã‘ å›ã™ã‚ˆã†ãªç¶™ç¶šãŒå–ã‚Šå‡ºã›ã‚‹ã€ã‚“ã ã‚ã†ï¼</p>
<!--

  HTML ã¨ã—ã¦ pandoc -B ã§ include ã™ã‚‹.

  <H2> ã‚’åˆ—æŒ™ã—ã¦ãã‚Œã‚‰ã«ãƒªãƒ³ã‚¯ã‚’è²¼ã£ãŸ toc ã‚’ id='toc' ã«åŸ‹ã‚è¾¼ã‚€.
  markdown ã§æ›¸ã„ã¦ã‚‹ã ã‚ã†ã‹ã‚‰ä¾‹ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªæ®µè½ã‚’æ›¸ã‘ã°ã‚ˆã„.

```
## INDEX
<div id=toc></div>
```

  used in
  - /memo/gnuplot
  - /memo/linux
  - /memo/imagemagick

-->
<script>
(function() {
  var sections = document.getElementsByTagName('h2');
  var i;
  var OL = document.createElement('ol');
  for (i=0; i < sections.length; ++i) {
    var LI = document.createElement('li');
    var A = document.createElement('a');
    A.innerHTML = sections[i].innerHTML;
    if (A.innerHTML.toUpperCase() == 'INDEX') continue;
    A.href = '#' + i;
    LI.appendChild(A);
    OL.appendChild(LI);

    var PREF = document.createElement('a');
    PREF.name = i;
    sections[i].appendChild(PREF);
  }

  var done = false;
  function work() {
    if (done) return;
    if ( document.getElementById('toc') === null) return; // no toc element
    document.getElementById('toc').appendChild(OL);
    done = true;
  };

  window.onload = work;
  setTimeout(work,800);
}());
</script>
<footer>
    <p class="is-pulled-right">
    @cympfh / mail@cympfh.cc
    </p>
</footer>
<!--

  HTML ã¨ã—ã¦ pandoc -B ã§ include ã™ã‚‹.

  <H2> ã‚’åˆ—æŒ™ã—ã¦ãã‚Œã‚‰ã«ãƒªãƒ³ã‚¯ã‚’è²¼ã£ãŸ toc ã‚’ id='toc' ã«åŸ‹ã‚è¾¼ã‚€.
  markdown ã§æ›¸ã„ã¦ã‚‹ã ã‚ã†ã‹ã‚‰ä¾‹ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªæ®µè½ã‚’æ›¸ã‘ã°ã‚ˆã„.

```
## INDEX
<div id=toc></div>
```

  used in
  - /memo/gnuplot
  - /memo/linux
  - /memo/imagemagick

-->
<script>
(function() {
  var sections = document.getElementsByTagName('h2');
  var i;
  var OL = document.createElement('ol');
  for (i=0; i < sections.length; ++i) {
    var LI = document.createElement('li');
    var A = document.createElement('a');
    A.innerHTML = sections[i].innerHTML;
    if (A.innerHTML.toUpperCase() == 'INDEX') continue;
    A.href = '#' + i;
    LI.appendChild(A);
    OL.appendChild(LI);

    var PREF = document.createElement('a');
    PREF.name = i;
    sections[i].appendChild(PREF);
  }

  var done = false;
  function work() {
    if (done) return;
    if ( document.getElementById('toc') === null) return; // no toc element
    document.getElementById('toc').appendChild(OL);
    done = true;
  };

  window.onload = work;
  setTimeout(work,800);
}());
</script>
</body>
</html>
