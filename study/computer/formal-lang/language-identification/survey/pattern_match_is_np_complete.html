<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>パターンマッチはNP完全 [D.Angluin 1979]</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../../../../../resources/css/c.css">
  <link rel="stylesheet" href="./c.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">パターンマッチはNP完全 [D.Angluin 1979]</h1>
</header>
<p>3-SAT から パターンマッチへの帰着を考える. 即ち、パターンマッチで 3-SAT を解く.</p>
<p>CNFで書かれた <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ϕ</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math> がn変数、m節だとする. 便宜上、変数を <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><msub><mi>x</mi><mn>2</mn></msub><mi>.</mi><mi>.</mi><msub><mi>x</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">x_1, x_2 .. x_n</annotation></semantics></math> とリネームする.</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ϕ</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math> から、文字列 <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math> とパターン <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> を構築して <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>≼</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">s \preceq p</annotation></semantics></math> を解けば 3-SAT が解けるようにする. 登場する変数は</p>
<ul class="incremental">
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>,</mo><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i, v_i</annotation></semantics></math>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1 \leq i \leq n</annotation></semantics></math></li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>j</mi></msub><mo>,</mo><msub><mi>d</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">c_j, d_j</annotation></semantics></math>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>j</mi><mo>≤</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">1 \leq j \leq m</annotation></semantics></math></li>
</ul>
<p>i番目の節から、次のようにしてパターン <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>i</mi></msub><annotation encoding="application/x-tex">p_i</annotation></semantics></math> を作る:</p>
<p>i番目の節は <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false" form="postfix">}</mo><mo>∪</mo><mo stretchy="false" form="prefix">{</mo><mover><msub><mi>x</mi><mi>i</mi></msub><mo accent="true">‾</mo></mover><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{x_i\} \cup \{ \bar{x_i} \}</annotation></semantics></math> の内の3つを or でつないだものである. 節中の <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mi>i</mi></msub><annotation encoding="application/x-tex">x_i</annotation></semantics></math> を <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>i</mi></msub><annotation encoding="application/x-tex">u_i</annotation></semantics></math> に、<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><msub><mi>x</mi><mi>i</mi></msub><mo accent="true">‾</mo></mover><annotation encoding="application/x-tex">\bar{x_i}</annotation></semantics></math> を <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>v</mi><mi>i</mi></msub><annotation encoding="application/x-tex">v_i</annotation></semantics></math> に置き換えて3つの変数をつないだものを <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>i</mi></msub><annotation encoding="application/x-tex">p_i</annotation></semantics></math> とする. (e.g. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo>∨</mo><mover><msub><mi>x</mi><mn>3</mn></msub><mo accent="true">‾</mo></mover><mo>∨</mo><msub><mi>x</mi><mn>5</mn></msub><mo stretchy="false" form="postfix">)</mo><mo accent="false">⇒</mo><msub><mi>u</mi><mn>1</mn></msub><msub><mi>v</mi><mn>3</mn></msub><msub><mi>u</mi><mn>5</mn></msub></mrow><annotation encoding="application/x-tex">(x_1 \lor \bar{x_3} \lor x_5) \Rightarrow u_1 v_3 u_5</annotation></semantics></math>).</p>
<p>パターンマッチする文字列<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math> と パターン <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math> を次のように定める.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>=</mo><mo stretchy="false" form="prefix">(</mo><mn>1110</mn><msup><mo stretchy="false" form="postfix">)</mo><mi>n</mi></msup><mo>⋅</mo><mo stretchy="false" form="prefix">(</mo><msup><mn>1</mn><mn>7</mn></msup><mn>0</mn><msup><mo stretchy="false" form="postfix">)</mo><mi>m</mi></msup><mo>⋅</mo><mo stretchy="false" form="prefix">(</mo><msup><mn>1</mn><mn>4</mn></msup><mn>0</mn><msup><mo stretchy="false" form="postfix">)</mo><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">s = (1110)^n \cdot (1^7 0)^m \cdot (1^4 0)^m</annotation></semantics></math> <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><munder><mo>∏</mo><mi>i</mi></munder><mo stretchy="false" form="prefix">(</mo><msub><mi>u</mi><mi>i</mi></msub><msub><mi>v</mi><mi>i</mi></msub><mn>0</mn><msup><mo stretchy="false" form="postfix">)</mo><mi>n</mi></msup><mo>⋅</mo><munder><mo>∏</mo><mi>j</mi></munder><mo stretchy="false" form="prefix">(</mo><msub><mi>p</mi><mi>j</mi></msub><msub><mi>c</mi><mi>j</mi></msub><mn>0</mn><mo stretchy="false" form="postfix">)</mo><mo>⋅</mo><munder><mo>∏</mo><mi>j</mi></munder><mo stretchy="false" form="prefix">(</mo><msub><mi>c</mi><mi>j</mi></msub><msub><mi>d</mi><mi>j</mi></msub><mn>0</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">p = \prod_i (u_i v_i 0)^n \cdot \prod_j (p_j c_j 0) \cdot \prod_j (c_j d_j 0)</annotation></semantics></math></p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>s</mi><annotation encoding="application/x-tex">s</annotation></semantics></math>にも<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>にも<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>0</mn><annotation encoding="application/x-tex">0</annotation></semantics></math>がちょうど<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>+</mo><mn>2</mn><mi>m</mi></mrow><annotation encoding="application/x-tex">n+2m</annotation></semantics></math>個だけ出現するので、変数には<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>からなる文字列しか入らない. また、<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>j</mi></msub><msub><mi>c</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">p_j c_j</annotation></semantics></math> ってのが4変数であることに註意すると、</p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>,</mo><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i, v_i</annotation></semantics></math> は一方が<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>11</mn><annotation encoding="application/x-tex">11</annotation></semantics></math>でもう一方が<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math>. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>c</mi><mi>j</mi></msub><annotation encoding="application/x-tex">c_j</annotation></semantics></math> は <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> または <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>11</mn><annotation encoding="application/x-tex">11</annotation></semantics></math> または <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>111</mn><annotation encoding="application/x-tex">111</annotation></semantics></math>.</p>
<ul class="incremental">
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>i</mi></msub><annotation encoding="application/x-tex">u_i</annotation></semantics></math> が <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>11</mn><annotation encoding="application/x-tex">11</annotation></semantics></math> のとき、<span class="math inline">$x_i = \rm true$</span>,</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>u</mi><mi>i</mi></msub><annotation encoding="application/x-tex">u_i</annotation></semantics></math> が <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>1</mn><annotation encoding="application/x-tex">1</annotation></semantics></math> のとき、<span class="math inline">$x_i = {\rm false}$</span>.</li>
</ul>
<p>だとみなして充足問題が解かれる.</p>
<p>全ての <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>j</mi></msub><annotation encoding="application/x-tex">p_j</annotation></semantics></math> について、長さ <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>1</mn><mi>k</mi></msup><mo stretchy="false" form="prefix">(</mo><mi>k</mi><mo>≥</mo><mn>4</mn><mo stretchy="false" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">1^k (k \geq 4)</annotation></semantics></math> が入れば、正しく充足される.</p>
</body>
</html>
