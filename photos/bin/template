#!/bin/bash

help() {
  cat << HELP
その場にある *.thumb.jpg 一覧を使ってビュワーを作る
HELP
  exit 0
}

[ $# -ne 0 ] && help

cat <<EOM
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="../resources/js/material-photo-gallery.min.js"></script>
  <link rel="stylesheet" href="../resources/css/material-photo-gallery.css">
</head>
<body>
<div class="m-p-g">
  <div class="m-p-g__thumbs" data-google-image-layout data-max-height="350">
EOM

find . -name '*.thumb.*' | sort -r |
while read thumbnail; do
    cat <<EOM
    <img src="../${PWD##*/}/$thumbnail" data-full="../${PWD##*/}/$thumbnail" class="m-p-g__thumbs-img">
EOM
done

cat <<EOM
  </div>
  <div class="m-p-g__fullscreen"></div>
</div>
<script>
new MaterialPhotoGallery(document.querySelector('.m-p-g'));
</script>
EOM
