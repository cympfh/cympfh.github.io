digraph CVAE {
    graph [rankdir=BT];
    graph [bgcolor="#f6f6f6"];
    subgraph cluster_CVAE {
        graph [label="CVAE"];
        {x y} -> Encoder -> Pr;
        Pr [label="Pr(z|x,y)"];
        Pr -> z [style=dotted];
        {x z} -> Decoder -> "y'";
        Encoder [shape=rect label="Encoder (Q)"];
        Decoder [shape=rect label="Decoder (R)"];
    }
    subgraph cluster_test {
        graph [label="(testing mode)"];
        Pr_t -> z_t [style=dotted];
        {x_t z_t} -> Decoder_t -> "y'_t";
        Decoder_t [shape=rect label="Decoder (R)"];
        Pr_t [label="N(0, 1)"];
        z_t [label="z"];
        x_t [label="x"];
        "y'_t" [label="y'"];

    }
}
