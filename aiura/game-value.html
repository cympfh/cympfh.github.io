<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="unidoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>ゲームの値</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="https://cympfh.cc/resources/css/youtube.css" />
  <link href="https://unpkg.com/prismjs@1.x.0/themes/prism.css" rel="stylesheet" />
  <script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-chtml-full.js"></script>
  <link href="../resources/css/c.css" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

</head>
<body>
<header class="page-header">
    <a href='index.html'><i class="fa fa-stumbleupon"></i></a>
</header>

<h1 class="title">ゲームの値</h1>
<p><p class=date style='text-align: right'>2016-11-23 (Wed.), 2017-08-09 (Wed.)</p> <div class='is-pulled-right'> <a class='tag is-red' href=index.html#ゲーム理論>ゲーム理論</a> </div> % ゲームの値</p>
<p>これは <a href="game-class.html">game-class.html</a> とか <a href="game-algebra.html">game-algebra.html</a> の続き</p>
<h2>INDEX</h2>
<p><div id=toc></div></p>
<h2>参考文献</h2>
<ul>
  <li>M.H.Albert (著), R.J.Nowakowski (著), D.Wolfe (著), 川辺 治之 (翻訳): "組合せゲーム理論入門 －勝利の方程式－" (2011)</li>
</ul>
<h2>ゲームの定義 (復習)</h2>
<p>二人組み合わせゲームを Conway の方法で形式的に表現する.</p>
<p>ゲームは次のように再帰的に定義される.</p>
<ol>
  <li>\(\{|\}\) はゲームである.</li>
  <li>
    \(g_1, \ldots, g_n, h_1, \ldots, h_m\) がゲームであるとき、 \(\{g_1, \ldots, g_n | h_1, \ldots, h_m\}\) もまたゲームである
    <ul>
      <li>略記法として、集合 \(G=\{g_1, \ldots, g_n\}, H=\{h_1, \ldots, h_m\}\) として \(\{G|H\}\) とも書く</li>
    </ul>
  </li>
</ol>
<h3>等価性、順序</h3>
<p><a href="game-algebra.html">ゲームの代数</a> 参照のこと.</p>
<p>重要な性質としては</p>
<ul>
  <li>
    ゲーム \(G\) は後手必勝
    <ul>
      <li>\(\iff G = 0\)</li>
    </ul>
  </li>
  <li>
    \(G\) は先手必勝
    <ul>
      <li>\(\iff G \| 0\) (比較不能)</li>
    </ul>
  </li>
  <li>
    \(G\) は左必勝
    <ul>
      <li>\(\iff G &gt; 0\)</li>
    </ul>
  </li>
  <li>
    \(G\) は右必勝
    <ul>
      <li>\(\iff G &lt; 0\)</li>
    </ul>
  </li>
</ul>
<h2>ゲームの値</h2>
<p>ゲームに値を対応させる.</p>
<p>まずは、次のように、一部のゲームに整数値を対応させる.</p>
<ul>
  <li>\(\overline{0} = \{|\}\)</li>
  <li>
    \(\overline{1} = \{\overline{0}|\}\)
    <ul>
      <li>\(\overline{-1} = \{|\overline{0}\}\)</li>
    </ul>
  </li>
  <li>
    \(\overline{2} = \{\overline{1}|\}\)
    <ul>
      <li>\(\overline{-2} = \{|\overline{-1}\}\)</li>
    </ul>
  </li>
  <li>
    \(\overline{n} = \{\overline{n-1}|\}\) ( \(n&gt;0\) )
    <ul>
      <li>\(\overline{-n} = \{|\overline{1-n}\}\) ( \(n&gt;0\) )</li>
    </ul>
  </li>
</ul>
<p>ここでゲーム \(G\) が整数 \(n\) に対応していることを \(G=\overline{n}\) と書いた.</p>
<blockquote>\(n \geq 0\) に対して \(\overline{n}\) は左が自由に \(n\) 手打てるゲームを表している. ゲームのマイナス (左右の入れ替え) が整数のマイナスに対応している.</blockquote>
<h3>ゲームの代数との対応</h3>
<p><a href="game-algebra.html">ゲームの代数</a> でゲームの和や大小比較を定義したが、 これが今回定義した整数の上の和や大小比較と一致する.</p>
<p>例えば \(\overline{n} + \overline{m} = \overline{n + m}\) (ゲームの \(=\) ) は自明.</p>
<p>整数 \(a,b,c\) があって、 ゲーム \(A=\overline{a}\) , \(B=\overline{b}\) , \(C=\overline{c}\) があるとする.</p>
<ul>
  <li>\(A+B+C \geq 0 \iff a+b+c \geq 0\)</li>
  <li>\(A+B = C \iff a+b = c\)</li>
  <li>\(A \geq B \iff a \geq b\)</li>
</ul>
<h2>2進有理数</h2>
<p>分母が (2以上の) 2の冪数である有理数を2進有理数と呼ぶ.</p>
<p>今度は、整数と対応付けられなかったゲームのうちの幾つかを2進有理数と対応付ける.</p>
<p>\(j \geq 1\) 、奇数 \(m\) について</p>
\[\overline{~\frac{m}{2^j}~} =
\left\{~
\overline{~\frac{(m-1)&#x2F;2}{2^{j-1}}~}
~|~
\overline{~\frac{(m+1)&#x2F;2}{2^{j-1}}~}
~\right\}\]
<p>右辺には分母が \(2^0=1\) となることがあるが、これは先述の整数とみなす. 例えば、 \(\overline{1&#x2F;2} = \{0|1\}\) .</p>
<h3>例題</h3>
<p>\(\overline{1&#x2F;2} + \overline{1&#x2F;2} = \overline{~1~}\) が成立する.</p>
<p>これを示すのに、 \(\overline{1&#x2F;2} + \overline{1&#x2F;2} - \overline{~1~} = 0\) すなわち \(\overline{1&#x2F;2} + \overline{1&#x2F;2} - \overline{~1~}\) が後手必勝であることを言えばいい.</p>
<p>先手が \(1&#x2F;2\) について打って \(0\) (左) または \(1\) (右) になったら後手はもう一つの \(1&#x2F;2\) について \(1\) または \(0\) にすることで、 ゲームは \(\overline{~1~} - \overline{~1~}\) になる. これが後手必勝なのは自明.</p>
<p>先手が右で \(-\overline{1}\) \((=\overline{-1})\) を打ったらゲームは \(1&#x2F;2 + 1&#x2F;2\) になる. これはどう転んでも左必勝. 従って後手必勝.</p>
<h3>ゲームの代数との対応</h3>
<p>整数と同様.</p>
<ul>
  <li>\(A+B+C \geq 0 \iff a+b+c \geq 0\)</li>
  <li>\(A+B = C \iff a+b = c\)</li>
  <li>\(A \geq B \iff a \geq b\)</li>
</ul>
<p>\(+, \geq\) がゲームについて言ってるのか、整数・2進有理数について言ってるのかの区別は必要ない.</p>
<p>面倒なので \(\overline{n}\) も単に \(n\) と書いて、 数とゲームを混ぜて足したりする (ゲームであるほうにキャストする).</p>
<h3>弱数避定理 (Weak Number-Avoidance)</h3>
<p>以上の、整数または2進有理数に対応づくゲームを「数である」という.</p>
<p><div class=thm> 数 \(x\) であるゲームと、数でないゲーム \(G\) との和 \(G+x\) について、 先手の左が \(x\) に手を打って勝つならば、 代わりに \(G\) に手を打っても勝つ. </div></p>
<blockquote>「 \(G\) で左が先手で勝つ」を「 \(G^L\) で左または後手が勝つ」と読み替えると、 \(G^L \geq 0\) と容易に書き直せる.</blockquote>
<p>定理の主張を言い換えると、 \(G+x^L \geq 0\) ならば、 \(G^L+x \geq 0\) と言っている.</p>
<p>\(G\) が数でないので、 \(G+x^L=0 \iff G=-x^L\) とあることはない. 従って、 \(G+x^L \geq 0\) ならば \(G+x^L &gt; 0\) . すなわち \(G+x^L\) は左必勝. ここから左が \(G\) が打った局面でも左必勝、または後手必勝で、 \(G^L + x^L \geq 0\) .</p>
<p>さて数の定義から、 \(x^L &lt; x\) .</p>
<p>これを推移させると \(G^L + x &gt; G^L + x^L \geq 0\) . 以上から主張は正しい.</p>
<h3>誘因</h3>
<p>左誘因も右も等しく、</p>
\[G^L - G = G - G^R = -\frac{1}{2^j} \lt 0\]
<p>となる.</p>
<h2>無限小</h2>
<p><div class=thm> 数でないゲーム \(G\) について、任意の正の数 \(x\) に対して</p>
\[-x \lt G \lt x\]
<p>が成立するとき、 \(G\) は無限小であるという. </div></p>
<p>ゲーム \(\{0|0\}\) に特別に \(\ast\) という名前を与える.</p>
<p><div class=thm> ゲーム \(\ast = \{0|0\}\) は無限小である. </div></p>
<p>ゲーム \(\ast\) は左右に関わらず先手必勝のゲームのことである. 従って \(\ast\) は \(0\) と比較不可能 ( \(\ast || 0\) ) (比較不可能、及び \(\geq\) の <a href="game-algebra.html#5">定義</a> より明らか). なので \(\ast\) は数では無い (数なら比較可能なので).</p>
<p>次に \(x &gt; 0\) なる任意の数 \(x\) について \(x + \ast &gt; 0\) を示す. 正であること \((&gt;0)\) は、先手後手に関わらずに左が勝つこと \((\in \mathcal{L})\) が必要十分だった.</p>
<p>左が先手なら、まず左は \(\ast\) に対して手を打って \(0\) にすることで、ゲームを \(x + 0 = x\) とでき、 \(x\) は定義より \(x \in \mathcal{L}\) であったので、これは左必勝.</p>
<p>左が後手であるとき、 先述した弱数避定理によれば \(\ast\) に打つ方がまだマシである. しかし右が \(\ast\) に手を打っても、ゲームは \(x+0\) となるだけでやはり左必勝.</p>
<p>というわけで</p>
\[x + \ast &gt; 0 \iff -x &lt; \ast\]
<p>が示された. さて \(\ast\) のその定義から明らかに</p>
\[\ast = -\ast\]
<p>が成立する. これを代入すれば</p>
\[\ast &lt; x\]
<p>も同時に確認できる. 結局</p>
\[-x &lt; \ast &lt; x\]
<p>であることが確認できた.</p>
<h3>\(\uparrow, \downarrow\)</h3>
<p>\(\ast\) を使って次の2つのゲームを新たに定義する. 数でないものを含んでるので明らかに次の2つも数ではない.</p>
<ul>
  <li>\(\uparrow = \{ 0 | \ast \}\)</li>
  <li>\(\downarrow = \{ \ast | 0 \} ( = - \uparrow)\)</li>
</ul>
<p>これらはともにやはり無限小であり、かつ、</p>
<ul>
  <li>\(\uparrow &gt; 0\)</li>
  <li>\(\downarrow &lt; 0\)</li>
</ul>
<p>である.</p>
<h3>全微小 (all-small) ゲーム</h3>
<p>ゲーム \(G\) から導かれるすべての局面について 「左に打つ手があるとき、またそのときに限り、右にも打つ手がある」 が成立するとき、 \(G\) は全微小ゲームであるという. 例えば \(0\) や \(\ast\) や \(\uparrow, \downarrow\) が全微小ゲームである.</p>
<p><div class=thm> \(G\) が全微小ならば、 \(G\) は無限小である. </div></p>
<p>その定義から \(G\) は、含む選択肢のすべてが全微小である. たぶん帰納法で証明できる. その基底は \(G=0\) のとき.</p>
<p>数 \(x&gt;0\) に対して \(G+x\) が左必勝であること \((G+x&gt;0)\) を示したい.</p>
<p>左が先手なら数を避けて \(G\) を進めて \(G^L + x\) とする. 定義より \(G^L\) もまた全微小であり、そして帰納法の仮定で \(G^L\) を無限小であるとする. 従って \(G^L &gt; -x\) なので \(G^L + x &gt; 0\) で、左必勝. 従って左が先手なら \(G+x\) は左が勝つ.</p>
<p>左が後手のとき. 右は数を避けるべきで \(G^R + x\) とする. 同様に \(G^R\) は無限小なので \(G^R &gt; -x\) . \(G^R + x &gt; 0\) . なので左が勝つ.</p>
<p>以上から \(G + x &gt; 0\) . \(\iff -x &lt; G\) . 同様に \(G &lt; x\) を示して無限小であることがわかる.</p>
<h3>\(\uparrow\) , \(\ast\) の比較</h3>
<p><div class=thm></p>
\[\downarrow \| \ast \| \uparrow\]
<p></div></p>
<p>ゲームの差 \(G = \uparrow - \ast\) を考える. これが \(0\) と比較不能であればいい. つまり先手必勝.</p>
<p>\(\ast = -\ast\) を使うと \(G\) は \(G = \uparrow + \ast\) と和の形に書き直せる. 和にすれば具体的に考えることができて、 左の先手なら \(\uparrow\) に手を打てば \(G^L=0\) とできて勝ち. 右の選定なら \(\ast\) に手を打てばやはり \(G^R=0\) とできて勝つ. 従って、 \(G\) は先手必勝なので</p>
\[\uparrow - \ast \| 0.\]
<p>差がゼロと比較不能なので</p>
\[\uparrow \| \ast.\]
<p>\(\downarrow = - \uparrow\) についても全く同様に示せる.</p>
<p><div class=thm></p>
\[\downarrow + \downarrow &lt; \ast &lt; \uparrow + \uparrow\]
<p></div></p>
<p>\(\downarrow, \uparrow\) は一つだけだと比較不能だけど2つ (以上) の和だとこのように順序付けることが可能.</p>
<p>差 \(G = \uparrow + \uparrow - \ast = \uparrow + \uparrow + \ast\) について \(G &gt; 0\) を示せばよい. (これが示せれば \(-G &lt; 0 \iff \downarrow + \downarrow - \ast &lt; 0\) も導かれる.)</p>
<p>ゼロより大きいことは左必勝に等しいので、3つのゲーム和 \(G = \uparrow + \uparrow + \ast\) が左必勝であることを具体的に示す.</p>
<p>左先手のとき下のゲームグラフが描けるが、左は赤いエッジを辿ってれば絶対勝てる. ただしここで、 \(\uparrow + \uparrow + \ast\) を \(\uparrow\uparrow\ast\) のように \(+\) を省略して記述している.</p>
<pre><code class="code language-dot">digraph {
    bgcolor=transparent;
    rankdir=LR;
    &quot;↑↑*&quot; [shape=doublecircle];

    &quot;↑↑*&quot; -&gt; &quot;↑↑&quot; [label=L color=red];
    &quot;↑↑*&quot; -&gt; &quot;↑*&quot; [label=L color=gray];

    &quot;↑*&quot; -&gt; { &quot;**&quot; &quot;↑&quot; } [label=R color=gray];
    &quot;↑↑&quot; -&gt; &quot;↑*&quot; [label=R];

    &quot;**&quot; -&gt; &quot;*&quot; [label=L color=gray];
    &quot;↑&quot; -&gt; 0 [label=L color=gray];
    &quot;↑*&quot; -&gt; &quot;*&quot; [label=L color=gray];
    &quot;↑*&quot; -&gt; &quot;↑&quot; [label=L color=red];

    &quot;*&quot; -&gt; 0 [label=R color=gray];
    &quot;↑&quot; -&gt; &quot;*&quot; [label=R];

    &quot;*&quot; -&gt; 0 [label=L color=red];

    {rank=same &quot;↑↑&quot; &quot;↑*&quot; &quot;↑&quot;}
    {rank=same &quot;**&quot; &quot;*&quot; &quot;0&quot;}
}
</code></pre>
<p>左が後手のときは下図のように.</p>
<pre><code class="code language-dot">digraph {
    bgcolor=transparent;
    rankdir=LR;
    &quot;↑↑*&quot; [shape=doublecircle];

    &quot;↑↑*&quot; -&gt; &quot;↑↑&quot; [label=R];
    &quot;↑↑*&quot; -&gt; &quot;↑**&quot; [label=R];

    &quot;↑**&quot; -&gt; &quot;**&quot; [label=L color=red];
    &quot;↑**&quot; -&gt; &quot;↑*&quot; [label=L color=gray];
    &quot;↑↑&quot; -&gt; &quot;↑&quot; [label=L color=red];

    &quot;↑&quot; -&gt; &quot;*&quot; [label=R];
    &quot;**&quot; -&gt; &quot;*&quot; [label=R];
    &quot;↑*&quot; -&gt; &quot;**&quot; [label=R color=gray];
    &quot;↑*&quot; -&gt; &quot;↑&quot;  [label=R] color=gray;

    &quot;*&quot; -&gt; 0 [label=L color=red]
    &quot;**&quot; -&gt; &quot;*&quot; [label=L color=gray]
    &quot;↑&quot; -&gt; 0 [label=L color=gray];

    &quot;*&quot; -&gt; 0 [label=R color=gray];

    {rank=same &quot;↑**&quot; &quot;↑↑&quot; &quot;**&quot;}
    {rank=same &quot;↑&quot; &quot;↑*&quot;}
    {rank=same &quot;*&quot; 0}
}
</code></pre>
<p>というわけで差が左必勝なので、その順序が成立する.</p>
<p>\(0&lt;\uparrow\) なので、 \(\uparrow\uparrow &lt; \uparrow\uparrow\uparrow\) が成り立ち、</p>
\[\downarrow\downarrow\downarrow &lt; \downarrow\downarrow &lt; 0 &lt; \uparrow\uparrow &lt; \uparrow\uparrow\uparrow\]
<p>が成立する.</p>
<h2>ゲームの自然数倍</h2>
<p>ゲームのスカラー倍とその記法を定義する. ゲーム \(G\) と 1 以上の自然数 \(n\) に対して、 \(G\) の \(n\) 個の和</p>
\[G + G + \cdots + G\]
<p>を</p>
\[n\cdot G\]
<p>と書く.</p>
<p>これに加えて</p>
\[0\cdot G = 0\]
\[(-n) \cdot G = n\cdot (-G)\]
<p>も定義することで、ゲームの自然数倍を定義する.</p>
<p>結合優先度として、 \(\cdot\) は \(+\) より高いものとする. 例えば \(n \cdot \uparrow \ast\) ( \(n \cdot \uparrow + \ast\) のこと) は \(n \cdot (\uparrow \ast)\) <strong>ではなく</strong> ( \(n \cdot \uparrow) \ast\) である.</p>
<p>演算子を省略してゲームを並べる場合 \(+\) を省略したものとしているので、 \(\cdot\) は省略しない.</p>
<h3>\(n \cdot \uparrow\) の標準形</h3>
<p>明らかに劣位な選択肢を予め除去し、打ち消し可能な手を予め打ち消しておいた形を標準形というのだった <a href="aiura/game-algebra">aiura/game-algebra</a> (./game-algebra.html#6). 標準形はあくまでもこの2つのルールを繰り返し適用して導出される.</p>
<p>ここでは \(n \cdot \uparrow\) \((n \geq 1)\) の標準形を調べる. 選択肢はどちらにしろ、 \(n\) 個ある \(\uparrow\) から一つの \(\uparrow\) を選んで手を進めるだけなので、</p>
\[n \cdot \uparrow = \{ (n-1) \cdot \uparrow | (n-1) \cdot \uparrow\ast\}\]
<p>まず片手枷原理をチェックする. 左右とも選択肢は1つずつなのでこれは適用できない.</p>
<p>次に打ち消し可能な手を探す. まず右についてだが、左の応手は</p>
\[(n-2)\cdot\uparrow, (n-1)\cdot \uparrow\]
<p>(一旦十分大きい \(n\) を用いている) であり、元のゲーム \(n \cdot \uparrow\) と比べて、どちらも大きくなっている (即ち右にとって劣位) ということは無い. なので右の手を打ち消すような手は無い.</p>
<p>一方で左の \((n-1)\cdot\uparrow\) というのは打ち消し可能で、 右は \((n-2)\cdot\uparrow\ast\) という手で打ち消す (それしか選択肢がないわけだが).</p>
\[\ast &lt; 2\cdot\uparrow\]
<p>であることに註意すると</p>
\[(n-2)\cdot\uparrow\ast &lt; (n-1)\cdot\uparrow\]
<p>であり打ち消すことがわかる. というわけで、これの左選択肢</p>
\[(n-3)\cdot\uparrow\ast, (n-2)\cdot\cdot\uparrow\]
<p>で短絡できる.</p>
\[\begin{align*}
n \cdot \uparrow
&amp; = \{ (n-1) \cdot \uparrow ~|~ \cdots \} \\
&amp; = \{ (n-2) \cdot \uparrow, (n-3) \cdot \uparrow\ast ~|~ \cdots \}
\end{align*}\]
<p>さて左選択肢に再び「 \(\uparrow\) の整数倍」が登場するので、再び同様の短絡が出来る.</p>
\[\begin{align*}
n \cdot \uparrow
&amp; = \{ (n-1) \cdot \uparrow ~|~ \cdots \} \\
&amp; = \{ (n-2) \cdot \uparrow, (n-3) \cdot \uparrow\ast ~|~ \cdots \}
&amp; = \cdots \\
&amp; = \{ \uparrow, 1\cdot\uparrow\ast, 2\cdot\uparrow\ast, \cdots, (n-4)\cdot\uparrow\ast, (n-3)\cdot\uparrow\ast ~|~ \cdots \}
\end{align*}\]
<p>さて、次に左選択肢の \(m\cdot\uparrow\ast\) ( \(m \leq n-3\) ) について考える. これも右にとって打ち消し可能な手である. すなわち、</p>
\[n\cdot\uparrow \to^L m\cdot\uparrow\ast \to^R m\cdot\uparrow\]
<p>について</p>
\[m\cdot\uparrow &lt; n\cdot\uparrow\]
<p>である ( \(m &lt;n\) なので). なので、やはり左の \(m\cdot\uparrow\ast\) という手は、 \(m\cdot\uparrow\) に対する左の選択肢で置き換えて短絡する. 左の選択肢はただ1つしかなく、しかもそれは \((m-1)\cdot\uparrow\) である. というわけでたくさんある</p>
\[1\cdot\uparrow\ast, 2\cdot\uparrow\ast, \cdots, (n-4)\cdot\uparrow\ast, (n-3)\cdot\uparrow\ast\]
<p>という選択肢の係数を 1 ずつ減らしていって、結局すべてをゼロにしてしまえる.</p>
\[n \cdot \uparrow = \{ \uparrow, 0 ~|~ (n-1)\cdot\uparrow\ast \}\]
<p>最後に \(0&lt;\uparrow\) なので、</p>
\[n \cdot \uparrow = \{ 0 ~|~ (n-1)\cdot\uparrow\ast \}\]
<p>とまで出来る.</p>
<p>さて \(n-3\) というが出てきてるので以上の考察は \(n\geq3\) くらい大きい数を考えている. 小さい \(n\) については個別に調べれば、やはり今の結論と同じ形をしていることがわかる.</p>

<!--

  以下を埋め込むと H2 タグを列挙してそれぞれへのリンクにする.
  ただし "INDEX" は除外する.

    <div id=toc></div>


  H2, H3 タグまでを列挙するには以下を埋め込む.

    <div id=toc-level-2></div>

-->
<script>
(function() {

  function naming(obj, name) {
      var PREF = document.createElement('a');
      PREF.name = name;
      obj.appendChild(PREF);
  }

  function level1() {

    var sections = document.getElementsByTagName('h2');
    var OL = document.createElement('ol');
    for (var i=0; i < sections.length; ++i) {
      var LI = document.createElement('li');
      var A = document.createElement('a');
      A.innerHTML = sections[i].innerHTML;
      if (A.innerHTML.toUpperCase() == 'INDEX') continue;
      A.href = '#' + i;
      LI.appendChild(A);
      OL.appendChild(LI);
      naming(sections[i], i);
      // var PREF = document.createElement('a');
      // PREF.name = i;
      // sections[i].appendChild(PREF);
    }

    return OL;
  }

  function level2() {

    var sections = document.querySelectorAll('h2,h3');
    var tree = [];
    for (var i = 0; i < sections.length; ++i) {
      if (sections[i].tagName == 'H2') {
        if (sections[i].innerHTML.toUpperCase() === 'INDEX') continue;
        tree.push([sections[i]]);
      } else {
        if (tree.length > 0) {
          tree[tree.length-1].push(sections[i]);
        } else {
          tree.push([sections[i]]);
        }
      }
    }

    var OL = document.createElement('ol');
    for (var i = 0; i < tree.length; ++i) {

      // h2-level
      var LI = document.createElement('li');
      var A = document.createElement('a');
      A.innerHTML = tree[i][0].innerHTML;
      A.href = '#' + i;
      naming(tree[i][0], i);
      LI.appendChild(A);

      // h3-level
      if (tree[i].length > 1) {
        var OL_sub = document.createElement('ol');
        for (var j = 1; j < tree[i].length; ++j) {
          var LI_sub = document.createElement('li');
          var A = document.createElement('a');
          A.innerHTML = tree[i][j].innerHTML;
          A.href = `#${i}-${j}`;
          naming(tree[i][j], `${i}-${j}`);
          LI_sub.appendChild(A);
          OL_sub.appendChild(LI_sub);
        }
        LI.appendChild(OL_sub);
      }

      OL.appendChild(LI);
    }

    return OL;
  }

  function append_toc() {
    if (document.getElementById('toc')) {
      document.getElementById('toc').appendChild(level1());
    }
    if (document.getElementById('toc-level-2')) {
      document.getElementById('toc-level-2').appendChild(level2());
    }
  }

  window.addEventListener('DOMContentLoaded', append_toc, false);
}());
</script>

  <script src="https://cympfh.cc/resources/js/youtube.js"></script>
  <script src="https://unpkg.com/prismjs@v1.x/components/prism-core.min.js"></script>
  <script src="https://unpkg.com/prismjs@v1.x/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>